<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Note4MySQL | Polin &amp; Rophen's Corner</title><meta name="description" content="Note4MySQL"><meta name="keywords" content="知识仓库"><meta name="author" content="Polin Huang,huangblcs@outlook.com"><meta name="copyright" content="Polin Huang"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Note4MySQL"><meta name="twitter:description" content="Note4MySQL"><meta name="twitter:image" content="https://www.percona.com/blog/wp-content/uploads/2018/04/Mysql-dolphin-square.svg.png"><meta property="og:type" content="article"><meta property="og:title" content="Note4MySQL"><meta property="og:url" content="http://www.poro.cool/2020/05/18/SkillRepos/Note4MySQL/"><meta property="og:site_name" content="Polin &amp; Rophen's Corner"><meta property="og:description" content="Note4MySQL"><meta property="og:image" content="https://www.percona.com/blog/wp-content/uploads/2018/04/Mysql-dolphin-square.svg.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://www.poro.cool/2020/05/18/SkillRepos/Note4MySQL/"><link rel="prev" title="Configuration4CentOS8(Docker)" href="http://www.poro.cool/2020/05/23/SkillRepos/Configuration4CentOS8(Docker)/"><link rel="next" title="LeetCode" href="http://www.poro.cool/2020/05/08/Algorithm/LeetCode/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Polin &amp; Rophen's Corner</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> Books</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">82</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">7</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">5</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> Books</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#note-for-mysql"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> Note for MySQL</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一-operate-mysql-in-terminal"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text"> 一、Operate MySQL in Terminal</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-basic-operation"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text"> 1. Basic operation</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-login-mysql"><span class="toc_mobile_items-number">1.1.1.1.</span> <span class="toc_mobile_items-text"> (1). Login MySQL</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-show-all-databases"><span class="toc_mobile_items-number">1.1.1.2.</span> <span class="toc_mobile_items-text"> (2). Show all databases</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-use-a-database"><span class="toc_mobile_items-number">1.1.1.3.</span> <span class="toc_mobile_items-text"> (3). Use a database</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-show-all-tables-in-the-database"><span class="toc_mobile_items-number">1.1.1.4.</span> <span class="toc_mobile_items-text"> (4). Show all tables in the database</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-select-statements"><span class="toc_mobile_items-number">1.1.1.5.</span> <span class="toc_mobile_items-text"> (5). Select statements</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-create-database"><span class="toc_mobile_items-number">1.1.1.6.</span> <span class="toc_mobile_items-text"> (6). Create database</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-create-table-and-describe-its-structure"><span class="toc_mobile_items-number">1.1.1.7.</span> <span class="toc_mobile_items-text"> (7). Create table and describe its structure</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#8-insert-data"><span class="toc_mobile_items-number">1.1.1.8.</span> <span class="toc_mobile_items-text"> (8). Insert data</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-mysql支持多种类型大致可以分为三类数值-日期时间和字符串字符类型"><span class="toc_mobile_items-number">1.1.1.9.</span> <span class="toc_mobile_items-text"> (9). MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#91-数值类型"><span class="toc_mobile_items-number">1.1.1.9.1.</span> <span class="toc_mobile_items-text"> (9.1) 数值类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#92-日期和时间类型"><span class="toc_mobile_items-number">1.1.1.9.2.</span> <span class="toc_mobile_items-text"> (9.2) 日期和时间类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#93-字符串类型"><span class="toc_mobile_items-number">1.1.1.9.3.</span> <span class="toc_mobile_items-text"> (9.3) 字符串类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#10-delete-data"><span class="toc_mobile_items-number">1.1.1.9.4.</span> <span class="toc_mobile_items-text"> (10). Delete data</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#11-update-data"><span class="toc_mobile_items-number">1.1.1.9.5.</span> <span class="toc_mobile_items-text"> (11). Update data</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-constraints-key"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text"> 2. Constraints Key</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-primary-key-能够唯一确定一张表中的一条记录即通过给某字段添加约束使得该字段不重复且不为空"><span class="toc_mobile_items-number">1.1.2.1.</span> <span class="toc_mobile_items-text"> (1). Primary key: 能够唯一确定一张表中的一条记录，即通过给某字段添加约束，使得该字段不重复且不为空</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-auto-increment"><span class="toc_mobile_items-number">1.1.2.2.</span> <span class="toc_mobile_items-text"> (2). Auto-increment</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-unique-key"><span class="toc_mobile_items-number">1.1.2.3.</span> <span class="toc_mobile_items-text"> (3). Unique key</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-not-null修饰的字段不能为空null"><span class="toc_mobile_items-number">1.1.2.4.</span> <span class="toc_mobile_items-text"> (4). Not NULL：修饰的字段不能为空NULL</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-default当插入字段值当时候如果没有传值就会使用默认值"><span class="toc_mobile_items-number">1.1.2.5.</span> <span class="toc_mobile_items-text"> (5). Default：当插入字段值当时候，如果没有传值，就会使用默认值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-foreign-key设计到两个表父表子表-or-主表副表"><span class="toc_mobile_items-number">1.1.2.6.</span> <span class="toc_mobile_items-text"> (6). Foreign key：设计到两个表（父表/子表 or 主表/副表）</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-数据库的三大设计范式"><span class="toc_mobile_items-number">1.1.3.</span> <span class="toc_mobile_items-text"> 3. 数据库的三大设计范式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#31-第一范式1nf数据表中的所有字段都是不可分割的原子值"><span class="toc_mobile_items-number">1.1.3.1.</span> <span class="toc_mobile_items-text"> 3.1 第一范式(1NF)：数据表中的所有字段都是不可分割的原子值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#32-第二范式2nf必须先满足第一范式要求除主键外的每一列都必须完全依赖主键"><span class="toc_mobile_items-number">1.1.3.2.</span> <span class="toc_mobile_items-text"> 3.2 第二范式(2NF)：必须先满足第一范式，要求除主键外的每一列都必须完全依赖主键。</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#33-第三范式3nf必须先满足第二范式除了主键列的其它列之间不能有传递依赖关系"><span class="toc_mobile_items-number">1.1.3.3.</span> <span class="toc_mobile_items-text"> 3.3 第三范式(3NF)：必须先满足第二范式，除了主键列的其它列之间不能有传递依赖关系</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-查询练习"><span class="toc_mobile_items-number">1.1.4.</span> <span class="toc_mobile_items-text"> 4. 查询练习</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#41-数据表准备"><span class="toc_mobile_items-number">1.1.4.1.</span> <span class="toc_mobile_items-text"> 4.1 数据表准备</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#42-查询练习"><span class="toc_mobile_items-number">1.1.4.2.</span> <span class="toc_mobile_items-text"> 4.2 查询练习</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#1-查询student表中的所有记录"><span class="toc_mobile_items-number">1.1.4.2.1.</span> <span class="toc_mobile_items-text"> 1. 查询student表中的所有记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#2-查询student表中所有记录的sname-ssex-class列"><span class="toc_mobile_items-number">1.1.4.2.2.</span> <span class="toc_mobile_items-text"> 2. 查询student表中所有记录的sname、ssex、class列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-查询教师所有的单位即不重复的department列"><span class="toc_mobile_items-number">1.1.4.2.3.</span> <span class="toc_mobile_items-text"> 3. 查询教师所有的单位，即不重复的department列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#4-查询score表中成绩在60-80之间的所有记录查询区间"><span class="toc_mobile_items-number">1.1.4.2.4.</span> <span class="toc_mobile_items-text"> 4. 查询score表中成绩在60-80之间的所有记录(查询区间)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#5-查询score表中成绩为75-76或78的记录"><span class="toc_mobile_items-number">1.1.4.2.5.</span> <span class="toc_mobile_items-text"> 5. 查询score表中成绩为75、76或78的记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#6-查询student表中95031班或性别为f的同学记录"><span class="toc_mobile_items-number">1.1.4.2.6.</span> <span class="toc_mobile_items-text"> 6. 查询student表中‘95031’班或性别为‘f’的同学记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#7-以class降序查询student表的所有记录"><span class="toc_mobile_items-number">1.1.4.2.7.</span> <span class="toc_mobile_items-text"> 7. 以class降序查询student表的所有记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#8-以cno升序-degree降序查询score表的所有记录"><span class="toc_mobile_items-number">1.1.4.2.8.</span> <span class="toc_mobile_items-text"> 8. 以cno升序、degree降序查询score表的所有记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#9-查询96031班的学生人数"><span class="toc_mobile_items-number">1.1.4.2.9.</span> <span class="toc_mobile_items-text"> 9. 查询‘96031’班的学生人数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#10-查询score表中的最高分的学生学好和课程好子查询或排序"><span class="toc_mobile_items-number">1.1.4.2.10.</span> <span class="toc_mobile_items-text"> 10. 查询score表中的最高分的学生学好和课程好（子查询或排序）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#11-查询每门课的平均成绩"><span class="toc_mobile_items-number">1.1.4.2.11.</span> <span class="toc_mobile_items-text"> 11. 查询每门课的平均成绩</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#12-查询score表中至少有2名学生选修的并以3开头的课程的平均分数"><span class="toc_mobile_items-number">1.1.4.2.12.</span> <span class="toc_mobile_items-text"> 12. 查询score表中至少有2名学生选修的并以3开头的课程的平均分数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#13-查询分数大于70小于90的sno列"><span class="toc_mobile_items-number">1.1.4.2.13.</span> <span class="toc_mobile_items-text"> 13. 查询分数大于70，小于90的sno列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#14-查询所有学生的sname-cno和degree列"><span class="toc_mobile_items-number">1.1.4.2.14.</span> <span class="toc_mobile_items-text"> 14. 查询所有学生的sname、cno和degree列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#15-查询所有学生的sno-cname-degree列"><span class="toc_mobile_items-number">1.1.4.2.15.</span> <span class="toc_mobile_items-text"> 15. 查询所有学生的sno、cname、degree列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#16-查询所有学生的sname-cname-degree列"><span class="toc_mobile_items-number">1.1.4.2.16.</span> <span class="toc_mobile_items-text"> 16. 查询所有学生的sname、cname、degree列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#17-查询96031班学生每门课的平均分"><span class="toc_mobile_items-number">1.1.4.2.17.</span> <span class="toc_mobile_items-text"> 17. 查询‘96031’班学生每门课的平均分</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#18-查询选修3-105课程的成绩高于103号同学3-105成绩的所有同学的成绩"><span class="toc_mobile_items-number">1.1.4.2.18.</span> <span class="toc_mobile_items-text"> 18. 查询选修“3-105”课程的成绩高于“103”号同学“3-105”成绩的所有同学的成绩</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#19-查询成绩高于学号为103-课程号为3-105的成绩的所有记录"><span class="toc_mobile_items-number">1.1.4.2.19.</span> <span class="toc_mobile_items-text"> 19. 查询成绩高于学号为“103”、课程号为“3-105”的成绩的所有记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#20-查询和学号为108-101的同学同年出生的所有学生的sno-sname和sbirthday列"><span class="toc_mobile_items-number">1.1.4.2.20.</span> <span class="toc_mobile_items-text"> 20. 查询和学号为‘108’、‘101‘的同学，同年出生的所有学生的sno、sname和sbirthday列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#21-查询aa教师任课的学生成绩"><span class="toc_mobile_items-number">1.1.4.2.21.</span> <span class="toc_mobile_items-text"> 21. 查询AA教师任课的学生成绩</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#22-查询选修某课程的同学人数多于3人的教师姓名"><span class="toc_mobile_items-number">1.1.4.2.22.</span> <span class="toc_mobile_items-text"> 22. 查询选修某课程的同学人数多于3人的教师姓名</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#23-查询96031和96033班全体学生的记录"><span class="toc_mobile_items-number">1.1.4.2.23.</span> <span class="toc_mobile_items-text"> 23. 查询96031和96033班全体学生的记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#24-查询存在有85分以上成绩的课程号"><span class="toc_mobile_items-number">1.1.4.2.24.</span> <span class="toc_mobile_items-text"> 24. 查询存在有85分以上成绩的课程号</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#25-查询出cs系教师所教课程的成绩表"><span class="toc_mobile_items-number">1.1.4.2.25.</span> <span class="toc_mobile_items-text"> 25. 查询出CS系教师所教课程的成绩表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#26-查询cs系和ee系不同职称的教师的tname和prof"><span class="toc_mobile_items-number">1.1.4.2.26.</span> <span class="toc_mobile_items-text"> 26. 查询“CS”系和“EE”系不同职称的教师的tname和prof</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#27-查询选修编号为3-105课程且成绩至少高于选修编号为3-245课程的同学的cnosno和degree并且按照degree从高到地次序排序"><span class="toc_mobile_items-number">1.1.4.2.27.</span> <span class="toc_mobile_items-text"> 27. 查询选修编号为&quot;3-105&quot;课程且成绩至少高于选修编号为’3-245’课程的同学的cno，sno和degree，并且按照degree从高到地次序排序</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#28-查询选修编号为3-105且成绩高于选修编号为3-245课程的同学cnosno和degree"><span class="toc_mobile_items-number">1.1.4.2.28.</span> <span class="toc_mobile_items-text"> 28. 查询选修编号为&quot;3-105&quot;且成绩高于选修编号为&quot;3-245&quot;课程的同学cno，sno和degree</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#29-查询所有教师和同学的-name-sex-birthday"><span class="toc_mobile_items-number">1.1.4.2.29.</span> <span class="toc_mobile_items-text"> 29. 查询所有教师和同学的 name ,sex, birthday</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#30查询所有女教师和女学生的namesexbirthday"><span class="toc_mobile_items-number">1.1.4.2.30.</span> <span class="toc_mobile_items-text"> 30.查询所有’女’教师和’女’学生的name,sex,birthday</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#31查询成绩比该课程平均成绩低的同学的成绩表"><span class="toc_mobile_items-number">1.1.4.2.31.</span> <span class="toc_mobile_items-text"> 31.查询成绩比该课程平均成绩低的同学的成绩表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#32查询所有任课教师的tname和department要在分数表中可以查得到"><span class="toc_mobile_items-number">1.1.4.2.32.</span> <span class="toc_mobile_items-text"> 32.查询所有任课教师的tname和department(要在分数表中可以查得到)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#33查出至少有2名男生的班号"><span class="toc_mobile_items-number">1.1.4.2.33.</span> <span class="toc_mobile_items-text"> 33.查出至少有2名男生的班号</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#34查询student-表中不姓a的同学的记录"><span class="toc_mobile_items-number">1.1.4.2.34.</span> <span class="toc_mobile_items-text"> 34.查询student 表中不姓&quot;A&quot;的同学的记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#35-查询student中每个学生的姓名和年龄"><span class="toc_mobile_items-number">1.1.4.2.35.</span> <span class="toc_mobile_items-text"> 35. 查询student中每个学生的姓名和年龄</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#36-查询student中最大和最小的sbirthday的值"><span class="toc_mobile_items-number">1.1.4.2.36.</span> <span class="toc_mobile_items-text"> 36. 查询student中最大和最小的sbirthday的值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#37-以班级号和年龄从大到小的顺序查询student表中的全部记录"><span class="toc_mobile_items-number">1.1.4.2.37.</span> <span class="toc_mobile_items-text"> 37. 以班级号和年龄从大到小的顺序查询student表中的全部记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#38查询男教师及其所上的课"><span class="toc_mobile_items-number">1.1.4.2.38.</span> <span class="toc_mobile_items-text"> 38.查询&quot;男&quot;教师及其所上的课</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#39查询最高分同学的sno-cno和degree"><span class="toc_mobile_items-number">1.1.4.2.39.</span> <span class="toc_mobile_items-text"> 39.查询最高分同学的sno, cno和degree</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#40-查询和c同性别的所有同学的sname"><span class="toc_mobile_items-number">1.1.4.2.40.</span> <span class="toc_mobile_items-text"> 40. 查询和&quot;C&quot;同性别的所有同学的sname</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#41查询和c同性别并且同班的所有同学的sname"><span class="toc_mobile_items-number">1.1.4.2.41.</span> <span class="toc_mobile_items-text"> 41.查询和&quot;C&quot;同性别并且同班的所有同学的sname</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#42-查询所有选修datastructure课程的男同学的成绩表"><span class="toc_mobile_items-number">1.1.4.2.42.</span> <span class="toc_mobile_items-text"> 42. 查询所有选修’DataStructure’课程的’男’同学的成绩表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#43-假设使用了以下命令建立了一个grade表查询所有同学的sno-cno和grade列"><span class="toc_mobile_items-number">1.1.4.2.43.</span> <span class="toc_mobile_items-text"> 43. 假设使用了以下命令建立了一个grade表，查询所有同学的sno , cno和grade列</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-sql的四种查询方式"><span class="toc_mobile_items-number">1.1.5.</span> <span class="toc_mobile_items-text"> 5. SQL的四种查询方式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#51-内连接inner-join-join"><span class="toc_mobile_items-number">1.1.5.1.</span> <span class="toc_mobile_items-text"> 5.1 内连接：inner join / join</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#52-外连接"><span class="toc_mobile_items-number">1.1.5.2.</span> <span class="toc_mobile_items-text"> 5.2 外连接：</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#521-左连接left-join-left-outer-join"><span class="toc_mobile_items-number">1.1.5.2.1.</span> <span class="toc_mobile_items-text"> 5.2.1 左连接：left join / left outer join</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#522-右连接right-join-right-outer-join"><span class="toc_mobile_items-number">1.1.5.2.2.</span> <span class="toc_mobile_items-text"> 5.2.2 右连接：right join / right outer join</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#523-完全外连接full-join-full-outer-join"><span class="toc_mobile_items-number">1.1.5.2.3.</span> <span class="toc_mobile_items-text"> 5.2.3 完全外连接：full join / full outer join</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-事务"><span class="toc_mobile_items-number">1.1.6.</span> <span class="toc_mobile_items-text"> 6. 事务</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#61-事务是mysql中最小的不可分割的工作单元-事务能保证一个业务的完整性"><span class="toc_mobile_items-number">1.1.6.1.</span> <span class="toc_mobile_items-text"> 6.1 事务是MySQL中最小的不可分割的工作单元。事务能保证一个业务的完整性。</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#62-mysql中如何控制事务"><span class="toc_mobile_items-number">1.1.6.2.</span> <span class="toc_mobile_items-text"> 6.2 MySQL中如何控制事务？</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#621-mysql中默认开启事务自动提交"><span class="toc_mobile_items-number">1.1.6.2.1.</span> <span class="toc_mobile_items-text"> 6.2.1 MySQL中默认开启事务（自动提交）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#622-手动提交commit数据再撤销不可行数据持久性"><span class="toc_mobile_items-number">1.1.6.2.2.</span> <span class="toc_mobile_items-text"> 6.2.2 手动提交（commit）数据，再撤销，不可行（数据持久性）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#623-手动开启一个事务-beginstart-transaction"><span class="toc_mobile_items-number">1.1.6.2.3.</span> <span class="toc_mobile_items-text"> 6.2.3 手动开启一个事务 begin/start transaction</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#63-事务的四大特征acid"><span class="toc_mobile_items-number">1.1.6.3.</span> <span class="toc_mobile_items-text"> 6.3 事务的四大特征(ACID)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#631-a原子性事务是最小单位不可再分割"><span class="toc_mobile_items-number">1.1.6.3.1.</span> <span class="toc_mobile_items-text"> 6.3.1 A：原子性——事务是最小单位，不可再分割；</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#632-c一致性事务要求在同一事务中的sql语句必须保证同时成功或同时失败"><span class="toc_mobile_items-number">1.1.6.3.2.</span> <span class="toc_mobile_items-text"> 6.3.2 C：一致性——事务要求，在同一事务中的sql语句，必须保证同时成功或同时失败；</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#633-i隔离性事务a和b之间具有隔离性"><span class="toc_mobile_items-number">1.1.6.3.3.</span> <span class="toc_mobile_items-text"> 6.3.3 I：隔离性——事务A和B之间具有隔离性；</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#634-d持久性事务一旦结束就不可以回滚"><span class="toc_mobile_items-number">1.1.6.3.4.</span> <span class="toc_mobile_items-text"> 6.3.4 D：持久性——事务一旦结束，就不可以回滚。</span></a></li></ol></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二-如何使用可视化工具操作数据库"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text"> 二、如何使用可视化工具操作数据库？</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三-如何在编程语言中操作数据库"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text"> 三、如何在编程语言中操作数据库？</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#note-for-mysql"><span class="toc-number">1.</span> <span class="toc-text"> Note for MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-operate-mysql-in-terminal"><span class="toc-number">1.1.</span> <span class="toc-text"> 一、Operate MySQL in Terminal</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-basic-operation"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 1. Basic operation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-login-mysql"><span class="toc-number">1.1.1.1.</span> <span class="toc-text"> (1). Login MySQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-show-all-databases"><span class="toc-number">1.1.1.2.</span> <span class="toc-text"> (2). Show all databases</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-use-a-database"><span class="toc-number">1.1.1.3.</span> <span class="toc-text"> (3). Use a database</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-show-all-tables-in-the-database"><span class="toc-number">1.1.1.4.</span> <span class="toc-text"> (4). Show all tables in the database</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-select-statements"><span class="toc-number">1.1.1.5.</span> <span class="toc-text"> (5). Select statements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-create-database"><span class="toc-number">1.1.1.6.</span> <span class="toc-text"> (6). Create database</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-create-table-and-describe-its-structure"><span class="toc-number">1.1.1.7.</span> <span class="toc-text"> (7). Create table and describe its structure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-insert-data"><span class="toc-number">1.1.1.8.</span> <span class="toc-text"> (8). Insert data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-mysql支持多种类型大致可以分为三类数值-日期时间和字符串字符类型"><span class="toc-number">1.1.1.9.</span> <span class="toc-text"> (9). MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#91-数值类型"><span class="toc-number">1.1.1.9.1.</span> <span class="toc-text"> (9.1) 数值类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#92-日期和时间类型"><span class="toc-number">1.1.1.9.2.</span> <span class="toc-text"> (9.2) 日期和时间类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#93-字符串类型"><span class="toc-number">1.1.1.9.3.</span> <span class="toc-text"> (9.3) 字符串类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-delete-data"><span class="toc-number">1.1.1.9.4.</span> <span class="toc-text"> (10). Delete data</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-update-data"><span class="toc-number">1.1.1.9.5.</span> <span class="toc-text"> (11). Update data</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-constraints-key"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 2. Constraints Key</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-primary-key-能够唯一确定一张表中的一条记录即通过给某字段添加约束使得该字段不重复且不为空"><span class="toc-number">1.1.2.1.</span> <span class="toc-text"> (1). Primary key: 能够唯一确定一张表中的一条记录，即通过给某字段添加约束，使得该字段不重复且不为空</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-auto-increment"><span class="toc-number">1.1.2.2.</span> <span class="toc-text"> (2). Auto-increment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-unique-key"><span class="toc-number">1.1.2.3.</span> <span class="toc-text"> (3). Unique key</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-not-null修饰的字段不能为空null"><span class="toc-number">1.1.2.4.</span> <span class="toc-text"> (4). Not NULL：修饰的字段不能为空NULL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-default当插入字段值当时候如果没有传值就会使用默认值"><span class="toc-number">1.1.2.5.</span> <span class="toc-text"> (5). Default：当插入字段值当时候，如果没有传值，就会使用默认值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-foreign-key设计到两个表父表子表-or-主表副表"><span class="toc-number">1.1.2.6.</span> <span class="toc-text"> (6). Foreign key：设计到两个表（父表/子表 or 主表/副表）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-数据库的三大设计范式"><span class="toc-number">1.1.3.</span> <span class="toc-text"> 3. 数据库的三大设计范式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#31-第一范式1nf数据表中的所有字段都是不可分割的原子值"><span class="toc-number">1.1.3.1.</span> <span class="toc-text"> 3.1 第一范式(1NF)：数据表中的所有字段都是不可分割的原子值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#32-第二范式2nf必须先满足第一范式要求除主键外的每一列都必须完全依赖主键"><span class="toc-number">1.1.3.2.</span> <span class="toc-text"> 3.2 第二范式(2NF)：必须先满足第一范式，要求除主键外的每一列都必须完全依赖主键。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#33-第三范式3nf必须先满足第二范式除了主键列的其它列之间不能有传递依赖关系"><span class="toc-number">1.1.3.3.</span> <span class="toc-text"> 3.3 第三范式(3NF)：必须先满足第二范式，除了主键列的其它列之间不能有传递依赖关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-查询练习"><span class="toc-number">1.1.4.</span> <span class="toc-text"> 4. 查询练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#41-数据表准备"><span class="toc-number">1.1.4.1.</span> <span class="toc-text"> 4.1 数据表准备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#42-查询练习"><span class="toc-number">1.1.4.2.</span> <span class="toc-text"> 4.2 查询练习</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-查询student表中的所有记录"><span class="toc-number">1.1.4.2.1.</span> <span class="toc-text"> 1. 查询student表中的所有记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-查询student表中所有记录的sname-ssex-class列"><span class="toc-number">1.1.4.2.2.</span> <span class="toc-text"> 2. 查询student表中所有记录的sname、ssex、class列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-查询教师所有的单位即不重复的department列"><span class="toc-number">1.1.4.2.3.</span> <span class="toc-text"> 3. 查询教师所有的单位，即不重复的department列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-查询score表中成绩在60-80之间的所有记录查询区间"><span class="toc-number">1.1.4.2.4.</span> <span class="toc-text"> 4. 查询score表中成绩在60-80之间的所有记录(查询区间)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-查询score表中成绩为75-76或78的记录"><span class="toc-number">1.1.4.2.5.</span> <span class="toc-text"> 5. 查询score表中成绩为75、76或78的记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-查询student表中95031班或性别为f的同学记录"><span class="toc-number">1.1.4.2.6.</span> <span class="toc-text"> 6. 查询student表中‘95031’班或性别为‘f’的同学记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-以class降序查询student表的所有记录"><span class="toc-number">1.1.4.2.7.</span> <span class="toc-text"> 7. 以class降序查询student表的所有记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-以cno升序-degree降序查询score表的所有记录"><span class="toc-number">1.1.4.2.8.</span> <span class="toc-text"> 8. 以cno升序、degree降序查询score表的所有记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-查询96031班的学生人数"><span class="toc-number">1.1.4.2.9.</span> <span class="toc-text"> 9. 查询‘96031’班的学生人数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-查询score表中的最高分的学生学好和课程好子查询或排序"><span class="toc-number">1.1.4.2.10.</span> <span class="toc-text"> 10. 查询score表中的最高分的学生学好和课程好（子查询或排序）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-查询每门课的平均成绩"><span class="toc-number">1.1.4.2.11.</span> <span class="toc-text"> 11. 查询每门课的平均成绩</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-查询score表中至少有2名学生选修的并以3开头的课程的平均分数"><span class="toc-number">1.1.4.2.12.</span> <span class="toc-text"> 12. 查询score表中至少有2名学生选修的并以3开头的课程的平均分数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-查询分数大于70小于90的sno列"><span class="toc-number">1.1.4.2.13.</span> <span class="toc-text"> 13. 查询分数大于70，小于90的sno列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-查询所有学生的sname-cno和degree列"><span class="toc-number">1.1.4.2.14.</span> <span class="toc-text"> 14. 查询所有学生的sname、cno和degree列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15-查询所有学生的sno-cname-degree列"><span class="toc-number">1.1.4.2.15.</span> <span class="toc-text"> 15. 查询所有学生的sno、cname、degree列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16-查询所有学生的sname-cname-degree列"><span class="toc-number">1.1.4.2.16.</span> <span class="toc-text"> 16. 查询所有学生的sname、cname、degree列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17-查询96031班学生每门课的平均分"><span class="toc-number">1.1.4.2.17.</span> <span class="toc-text"> 17. 查询‘96031’班学生每门课的平均分</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-查询选修3-105课程的成绩高于103号同学3-105成绩的所有同学的成绩"><span class="toc-number">1.1.4.2.18.</span> <span class="toc-text"> 18. 查询选修“3-105”课程的成绩高于“103”号同学“3-105”成绩的所有同学的成绩</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#19-查询成绩高于学号为103-课程号为3-105的成绩的所有记录"><span class="toc-number">1.1.4.2.19.</span> <span class="toc-text"> 19. 查询成绩高于学号为“103”、课程号为“3-105”的成绩的所有记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#20-查询和学号为108-101的同学同年出生的所有学生的sno-sname和sbirthday列"><span class="toc-number">1.1.4.2.20.</span> <span class="toc-text"> 20. 查询和学号为‘108’、‘101‘的同学，同年出生的所有学生的sno、sname和sbirthday列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#21-查询aa教师任课的学生成绩"><span class="toc-number">1.1.4.2.21.</span> <span class="toc-text"> 21. 查询AA教师任课的学生成绩</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#22-查询选修某课程的同学人数多于3人的教师姓名"><span class="toc-number">1.1.4.2.22.</span> <span class="toc-text"> 22. 查询选修某课程的同学人数多于3人的教师姓名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-查询96031和96033班全体学生的记录"><span class="toc-number">1.1.4.2.23.</span> <span class="toc-text"> 23. 查询96031和96033班全体学生的记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#24-查询存在有85分以上成绩的课程号"><span class="toc-number">1.1.4.2.24.</span> <span class="toc-text"> 24. 查询存在有85分以上成绩的课程号</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#25-查询出cs系教师所教课程的成绩表"><span class="toc-number">1.1.4.2.25.</span> <span class="toc-text"> 25. 查询出CS系教师所教课程的成绩表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#26-查询cs系和ee系不同职称的教师的tname和prof"><span class="toc-number">1.1.4.2.26.</span> <span class="toc-text"> 26. 查询“CS”系和“EE”系不同职称的教师的tname和prof</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#27-查询选修编号为3-105课程且成绩至少高于选修编号为3-245课程的同学的cnosno和degree并且按照degree从高到地次序排序"><span class="toc-number">1.1.4.2.27.</span> <span class="toc-text"> 27. 查询选修编号为&quot;3-105&quot;课程且成绩至少高于选修编号为’3-245’课程的同学的cno，sno和degree，并且按照degree从高到地次序排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#28-查询选修编号为3-105且成绩高于选修编号为3-245课程的同学cnosno和degree"><span class="toc-number">1.1.4.2.28.</span> <span class="toc-text"> 28. 查询选修编号为&quot;3-105&quot;且成绩高于选修编号为&quot;3-245&quot;课程的同学cno，sno和degree</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#29-查询所有教师和同学的-name-sex-birthday"><span class="toc-number">1.1.4.2.29.</span> <span class="toc-text"> 29. 查询所有教师和同学的 name ,sex, birthday</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#30查询所有女教师和女学生的namesexbirthday"><span class="toc-number">1.1.4.2.30.</span> <span class="toc-text"> 30.查询所有’女’教师和’女’学生的name,sex,birthday</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#31查询成绩比该课程平均成绩低的同学的成绩表"><span class="toc-number">1.1.4.2.31.</span> <span class="toc-text"> 31.查询成绩比该课程平均成绩低的同学的成绩表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#32查询所有任课教师的tname和department要在分数表中可以查得到"><span class="toc-number">1.1.4.2.32.</span> <span class="toc-text"> 32.查询所有任课教师的tname和department(要在分数表中可以查得到)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#33查出至少有2名男生的班号"><span class="toc-number">1.1.4.2.33.</span> <span class="toc-text"> 33.查出至少有2名男生的班号</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#34查询student-表中不姓a的同学的记录"><span class="toc-number">1.1.4.2.34.</span> <span class="toc-text"> 34.查询student 表中不姓&quot;A&quot;的同学的记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#35-查询student中每个学生的姓名和年龄"><span class="toc-number">1.1.4.2.35.</span> <span class="toc-text"> 35. 查询student中每个学生的姓名和年龄</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#36-查询student中最大和最小的sbirthday的值"><span class="toc-number">1.1.4.2.36.</span> <span class="toc-text"> 36. 查询student中最大和最小的sbirthday的值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#37-以班级号和年龄从大到小的顺序查询student表中的全部记录"><span class="toc-number">1.1.4.2.37.</span> <span class="toc-text"> 37. 以班级号和年龄从大到小的顺序查询student表中的全部记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#38查询男教师及其所上的课"><span class="toc-number">1.1.4.2.38.</span> <span class="toc-text"> 38.查询&quot;男&quot;教师及其所上的课</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#39查询最高分同学的sno-cno和degree"><span class="toc-number">1.1.4.2.39.</span> <span class="toc-text"> 39.查询最高分同学的sno, cno和degree</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#40-查询和c同性别的所有同学的sname"><span class="toc-number">1.1.4.2.40.</span> <span class="toc-text"> 40. 查询和&quot;C&quot;同性别的所有同学的sname</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#41查询和c同性别并且同班的所有同学的sname"><span class="toc-number">1.1.4.2.41.</span> <span class="toc-text"> 41.查询和&quot;C&quot;同性别并且同班的所有同学的sname</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#42-查询所有选修datastructure课程的男同学的成绩表"><span class="toc-number">1.1.4.2.42.</span> <span class="toc-text"> 42. 查询所有选修’DataStructure’课程的’男’同学的成绩表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#43-假设使用了以下命令建立了一个grade表查询所有同学的sno-cno和grade列"><span class="toc-number">1.1.4.2.43.</span> <span class="toc-text"> 43. 假设使用了以下命令建立了一个grade表，查询所有同学的sno , cno和grade列</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-sql的四种查询方式"><span class="toc-number">1.1.5.</span> <span class="toc-text"> 5. SQL的四种查询方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#51-内连接inner-join-join"><span class="toc-number">1.1.5.1.</span> <span class="toc-text"> 5.1 内连接：inner join / join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#52-外连接"><span class="toc-number">1.1.5.2.</span> <span class="toc-text"> 5.2 外连接：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#521-左连接left-join-left-outer-join"><span class="toc-number">1.1.5.2.1.</span> <span class="toc-text"> 5.2.1 左连接：left join / left outer join</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#522-右连接right-join-right-outer-join"><span class="toc-number">1.1.5.2.2.</span> <span class="toc-text"> 5.2.2 右连接：right join / right outer join</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#523-完全外连接full-join-full-outer-join"><span class="toc-number">1.1.5.2.3.</span> <span class="toc-text"> 5.2.3 完全外连接：full join / full outer join</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-事务"><span class="toc-number">1.1.6.</span> <span class="toc-text"> 6. 事务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#61-事务是mysql中最小的不可分割的工作单元-事务能保证一个业务的完整性"><span class="toc-number">1.1.6.1.</span> <span class="toc-text"> 6.1 事务是MySQL中最小的不可分割的工作单元。事务能保证一个业务的完整性。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#62-mysql中如何控制事务"><span class="toc-number">1.1.6.2.</span> <span class="toc-text"> 6.2 MySQL中如何控制事务？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#621-mysql中默认开启事务自动提交"><span class="toc-number">1.1.6.2.1.</span> <span class="toc-text"> 6.2.1 MySQL中默认开启事务（自动提交）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#622-手动提交commit数据再撤销不可行数据持久性"><span class="toc-number">1.1.6.2.2.</span> <span class="toc-text"> 6.2.2 手动提交（commit）数据，再撤销，不可行（数据持久性）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#623-手动开启一个事务-beginstart-transaction"><span class="toc-number">1.1.6.2.3.</span> <span class="toc-text"> 6.2.3 手动开启一个事务 begin/start transaction</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#63-事务的四大特征acid"><span class="toc-number">1.1.6.3.</span> <span class="toc-text"> 6.3 事务的四大特征(ACID)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#631-a原子性事务是最小单位不可再分割"><span class="toc-number">1.1.6.3.1.</span> <span class="toc-text"> 6.3.1 A：原子性——事务是最小单位，不可再分割；</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#632-c一致性事务要求在同一事务中的sql语句必须保证同时成功或同时失败"><span class="toc-number">1.1.6.3.2.</span> <span class="toc-text"> 6.3.2 C：一致性——事务要求，在同一事务中的sql语句，必须保证同时成功或同时失败；</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#633-i隔离性事务a和b之间具有隔离性"><span class="toc-number">1.1.6.3.3.</span> <span class="toc-text"> 6.3.3 I：隔离性——事务A和B之间具有隔离性；</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#634-d持久性事务一旦结束就不可以回滚"><span class="toc-number">1.1.6.3.4.</span> <span class="toc-text"> 6.3.4 D：持久性——事务一旦结束，就不可以回滚。</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-如何使用可视化工具操作数据库"><span class="toc-number">1.2.</span> <span class="toc-text"> 二、如何使用可视化工具操作数据库？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三-如何在编程语言中操作数据库"><span class="toc-number">1.3.</span> <span class="toc-text"> 三、如何在编程语言中操作数据库？</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(http://pngimg.com/uploads/mysql/mysql_PNG34.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Note4MySQL</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2020-05-18<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2020-05-18</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><a id="more"></a>
<h1 id="note-for-mysql"><a class="markdownIt-Anchor" href="#note-for-mysql"></a> Note for MySQL</h1>
<blockquote>
<p>MySQL: 关系型数据库</p>
</blockquote>
<h2 id="一-operate-mysql-in-terminal"><a class="markdownIt-Anchor" href="#一-operate-mysql-in-terminal"></a> 一、Operate MySQL in Terminal</h2>
<h3 id="1-basic-operation"><a class="markdownIt-Anchor" href="#1-basic-operation"></a> 1. Basic operation</h3>
<h4 id="1-login-mysql"><a class="markdownIt-Anchor" href="#1-login-mysql"></a> (1). Login MySQL</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p 123456		<span class="comment">-- 以root用户，密码123456登录</span></span><br><span class="line">mysql -u root -p mysql		<span class="comment">-- Connect database mysql with user: root, user will be prompted for a password</span></span><br><span class="line">mysql -h database_host database_name	<span class="comment">-- Connect database on other host</span></span><br><span class="line">mysql -e "source filename.sql" database_name	<span class="comment">-- Execute SQL statements in s script file</span></span><br></pre></td></tr></table></figure></div>
<h4 id="2-show-all-databases"><a class="markdownIt-Anchor" href="#2-show-all-databases"></a> (2). Show all databases</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="3-use-a-database"><a class="markdownIt-Anchor" href="#3-use-a-database"></a> (3). Use a database</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup <span class="keyword">with</span> -A</span><br><span class="line"></span><br><span class="line"><span class="keyword">Database</span> <span class="keyword">changed</span></span><br></pre></td></tr></table></figure></div>
<h4 id="4-show-all-tables-in-the-database"><a class="markdownIt-Anchor" href="#4-show-all-tables-in-the-database"></a> (4). Show all tables in the database</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br></pre></td></tr></table></figure></div>
<h4 id="5-select-statements"><a class="markdownIt-Anchor" href="#5-select-statements"></a> (5). Select statements</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure></div>
<h4 id="6-create-database"><a class="markdownIt-Anchor" href="#6-create-database"></a> (6). Create database</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database test;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| test               |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">Empty <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="7-create-table-and-describe-its-structure"><a class="markdownIt-Anchor" href="#7-create-table-and-describe-its-structure"></a> (7). Create table and describe its structure</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table pet(</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; owner varchar(20),</span><br><span class="line">    -&gt; species varchar(20),</span><br><span class="line">    -&gt; sex char(1),</span><br><span class="line">    -&gt; birth date,</span><br><span class="line">    -&gt; death date);</span><br><span class="line">Query OK, 0 rows affected (0.14 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| Tables_in_test |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| pet            |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">describe</span> pet;</span><br><span class="line">+<span class="comment">---------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field   | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">---------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| name    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| owner   | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| species | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex     | char(1)     | YES  |     | NULL    |       |</span><br><span class="line">| birth   | date        | YES  |     | NULL    |       |</span><br><span class="line">| death   | date        | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">---------+-------------+------+-----+---------+-------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="8-insert-data"><a class="markdownIt-Anchor" href="#8-insert-data"></a> (8). Insert data</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into pet</span><br><span class="line">    -&gt; values('Puffball', 'Diame', 'hamster', 'f', '1999-03-30', NULL);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from pet;</span><br><span class="line">+<span class="comment">----------+-------+---------+------+------------+-------+</span></span><br><span class="line">| name     | owner | species | sex  | birth      | death |</span><br><span class="line">+<span class="comment">----------+-------+---------+------+------------+-------+</span></span><br><span class="line">| Puffball | Diame | hamster | f    | 1999-03-30 | NULL  |</span><br><span class="line">+<span class="comment">----------+-------+---------+------+------------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="9-mysql支持多种类型大致可以分为三类数值-日期时间和字符串字符类型"><a class="markdownIt-Anchor" href="#9-mysql支持多种类型大致可以分为三类数值-日期时间和字符串字符类型"></a> (9). MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</h4>
<h5 id="91-数值类型"><a class="markdownIt-Anchor" href="#91-数值类型"></a> (9.1) 数值类型</h5>
<table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">Size(bytes)</th>
<th style="text-align:center">Range(signed)</th>
<th style="text-align:center">Range(unsigned)</th>
<th style="text-align:center">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">tinyint</td>
<td style="text-align:center">1</td>
<td style="text-align:center">(-128, 127)</td>
<td style="text-align:center">(0, 255)</td>
<td style="text-align:center">小整数</td>
</tr>
<tr>
<td style="text-align:center">smallint</td>
<td style="text-align:center">2</td>
<td style="text-align:center">(-32768, 32767)</td>
<td style="text-align:center">(0, 65535)</td>
<td style="text-align:center">大整数</td>
</tr>
<tr>
<td style="text-align:center">mediumint</td>
<td style="text-align:center">3</td>
<td style="text-align:center">(-2^23 - 1，2^23)</td>
<td style="text-align:center">(0, 2^24 - 1)</td>
<td style="text-align:center">大整数</td>
</tr>
<tr>
<td style="text-align:center">int(integer)</td>
<td style="text-align:center">4</td>
<td style="text-align:center">(-2^31 - 1, 2^31)</td>
<td style="text-align:center">(0, 2^32 - 1)</td>
<td style="text-align:center">大整数</td>
</tr>
<tr>
<td style="text-align:center">bigint</td>
<td style="text-align:center">8</td>
<td style="text-align:center">(-2^63 - 1, 2^63)</td>
<td style="text-align:center">(0,2^64 - 1)</td>
<td style="text-align:center">极大整数</td>
</tr>
<tr>
<td style="text-align:center">float</td>
<td style="text-align:center">4</td>
<td style="text-align:center">(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td>
<td style="text-align:center">0，(1.175 494 351 E-38，3.402 823 466 E+38)</td>
<td style="text-align:center">单精度浮点</td>
</tr>
<tr>
<td style="text-align:center">double</td>
<td style="text-align:center">8</td>
<td style="text-align:center">(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td style="text-align:center">0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td style="text-align:center">双精度浮点</td>
</tr>
<tr>
<td style="text-align:center">decimal</td>
<td style="text-align:center">对decimal(m, d), 若m&gt;d, 则为m+2; 否则为d+2</td>
<td style="text-align:center">依赖于m和d</td>
<td style="text-align:center">依赖于m和d</td>
<td style="text-align:center">小数值</td>
</tr>
</tbody>
</table>
<h5 id="92-日期和时间类型"><a class="markdownIt-Anchor" href="#92-日期和时间类型"></a> (9.2) 日期和时间类型</h5>
<table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">Size(bytes)</th>
<th style="text-align:center">Range</th>
<th style="text-align:center">Format</th>
<th style="text-align:center">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">date</td>
<td style="text-align:center">3</td>
<td style="text-align:center">1000-01-01/9999-12-31</td>
<td style="text-align:center">YYYY-MM-DD</td>
<td style="text-align:center">日期值</td>
</tr>
<tr>
<td style="text-align:center">time</td>
<td style="text-align:center">3</td>
<td style="text-align:center">‘-838:59:59’/‘838:59:59’</td>
<td style="text-align:center">HH:MM:SS</td>
<td style="text-align:center">时间值或持续时间</td>
</tr>
<tr>
<td style="text-align:center">year</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1901/2155</td>
<td style="text-align:center">YYYY</td>
<td style="text-align:center">年份值</td>
</tr>
<tr>
<td style="text-align:center">datetime</td>
<td style="text-align:center">8</td>
<td style="text-align:center">1000-01-01 00:00:00/9999-12-31 23:59:59</td>
<td style="text-align:center">YYYY-MM-DD HH:MM:SS</td>
<td style="text-align:center">混合日期和时间值</td>
</tr>
<tr>
<td style="text-align:center">timestamp</td>
<td style="text-align:center">4</td>
<td style="text-align:center">1970-01-01 00:00:00/2038 结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td>
<td style="text-align:center">YYYYMMDD HHMMSS</td>
<td style="text-align:center">混合日期和时间值，时间戳</td>
</tr>
</tbody>
</table>
<h5 id="93-字符串类型"><a class="markdownIt-Anchor" href="#93-字符串类型"></a> (9.3) 字符串类型</h5>
<table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">Size(bytes)</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">char</td>
<td style="text-align:center">0-255</td>
<td>定长字符串</td>
</tr>
<tr>
<td style="text-align:center">varchar</td>
<td style="text-align:center">0-65535</td>
<td>变长字符串</td>
</tr>
<tr>
<td style="text-align:center">tinyblob</td>
<td style="text-align:center">0-255</td>
<td>不超过255个字符的二进制字符串</td>
</tr>
<tr>
<td style="text-align:center">tinytext</td>
<td style="text-align:center">0-255</td>
<td>短文本字符串</td>
</tr>
<tr>
<td style="text-align:center">blob</td>
<td style="text-align:center">0-65535</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td style="text-align:center">text</td>
<td style="text-align:center">0-65535</td>
<td>长文本数据</td>
</tr>
<tr>
<td style="text-align:center">mediumblob</td>
<td style="text-align:center">0-16 777 215</td>
<td>二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td style="text-align:center">mediumtext</td>
<td style="text-align:center">0-16 777 215</td>
<td>中等长度文本数据</td>
</tr>
<tr>
<td style="text-align:center">longblob</td>
<td style="text-align:center">0-4 294 967 295</td>
<td>二进制形式的极大文本数据</td>
</tr>
<tr>
<td style="text-align:center">longtext</td>
<td style="text-align:center">0-4 294 967 295</td>
<td>极大文本数据</td>
</tr>
</tbody>
</table>
<h5 id="10-delete-data"><a class="markdownIt-Anchor" href="#10-delete-data"></a> (10). Delete data</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from pet where name = 'Fluffy';</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="11-update-data"><a class="markdownIt-Anchor" href="#11-update-data"></a> (11). Update data</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update pet set owner='Rophen' where name='Chirpy';</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from pet;</span><br><span class="line">+<span class="comment">----------+--------+---------+------+------------+------------+</span></span><br><span class="line">| name     | owner  | species | sex  | birth      | death      |</span><br><span class="line">+<span class="comment">----------+--------+---------+------+------------+------------+</span></span><br><span class="line">| Puffball | Diame  | hamster | f    | 1999-03-30 | NULL       |</span><br><span class="line">| Claws    | Gwen   | cat     | m    | 1994-04-03 | NULL       |</span><br><span class="line">| Buffy    | Harold | dog     | f    | 1989-05-13 | NULL       |</span><br><span class="line">| Fang     | Benny  | dog     | m    | 1990-08-27 | NULL       |</span><br><span class="line">| Bowser   | Diane  | dog     | m    | 1979-08-31 | 1995-07-29 |</span><br><span class="line">| Chirpy   | Rophen | bird    | f    | 1998-09-11 | NULL       |</span><br><span class="line">| Whistle  | Gwen   | bird    | NULL | 1997-12-09 | NULL       |</span><br><span class="line">| Slim     | Benny  | snake   | m    | 1996-04-29 | NULL       |</span><br><span class="line">| Puffball | Diane  | hamster | f    | 1999-03-30 | NULL       |</span><br><span class="line">+<span class="comment">----------+--------+---------+------+------------+------------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>数据记录常见操作：</p>
<ol>
<li>增 insert</li>
<li>删 delete</li>
<li>改 update</li>
<li>查 select</li>
</ol>
</blockquote>
<h3 id="2-constraints-key"><a class="markdownIt-Anchor" href="#2-constraints-key"></a> 2. Constraints Key</h3>
<h4 id="1-primary-key-能够唯一确定一张表中的一条记录即通过给某字段添加约束使得该字段不重复且不为空"><a class="markdownIt-Anchor" href="#1-primary-key-能够唯一确定一张表中的一条记录即通过给某字段添加约束使得该字段不重复且不为空"></a> (1). Primary key: 能够唯一确定一张表中的一条记录，即通过给某字段添加约束，使得该字段不重复且不为空</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.23 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; describe user;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'zhangsan'</span>);</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(1, 'zhangsan');</span><br><span class="line">ERROR 1062 (23000): Duplicate entry '1' for key 'user.PRIMARY'</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(2, 'zhangsan');</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">| id | name     |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">|  1 | zhangsan |</span><br><span class="line">|  2 | zhangsan |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="literal">NULL</span>, <span class="string">'zhangsan'</span>);</span><br><span class="line">ERROR 1048 (23000): Column 'id' cannot be null</span><br></pre></td></tr></table></figure></div>
<p>联合主键：只要联合的主键值加起来不重复就可以</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user2(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; password varchar(20),</span><br><span class="line">    -&gt; primary key(id, name)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user2 values(1, 'zhangsan', '123');</span><br><span class="line">mysql&gt; insert into user2 values(2, 'zhangsan', '123');</span><br><span class="line">mysql&gt; insert into user2 values(1, 'lisi', '123');</span><br><span class="line">mysql&gt; insert into user2 values(NULL, 'zhangsan', '123');</span><br></pre></td></tr></table></figure></div>
<h4 id="2-auto-increment"><a class="markdownIt-Anchor" href="#2-auto-increment"></a> (2). Auto-increment</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user3(</span><br><span class="line">    -&gt; id int primary key auto_increment,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.14 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user3 (name) values('zhangsan');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user3;</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">| id | name     |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">|  1 | zhangsan |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> user3 (<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="string">'zhangsan'</span>);</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user3;</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">| id | name     |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">|  1 | zhangsan |</span><br><span class="line">|  2 | zhangsan |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<p>如果创建表的时候，忘记创建主键约束，怎么办？</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user4(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user4;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">alter</span> <span class="keyword">table</span> user4 <span class="keyword">add</span> primary <span class="keyword">key</span>(<span class="keyword">id</span>);</span><br><span class="line">Query OK, 0 rows affected (0.13 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user4;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">alter</span> <span class="keyword">table</span> user4 <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line">Query OK, 0 rows affected (0.21 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user4;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | NO   |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">alter</span> <span class="keyword">table</span> user4 <span class="keyword">modify</span> <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span>;</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user4;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="3-unique-key"><a class="markdownIt-Anchor" href="#3-unique-key"></a> (3). Unique key</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user5(</span><br><span class="line">    -&gt; id int, </span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.09 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table user5 add unique(id);</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user5;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  | UNI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> user5 <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'zhangsan'</span>);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user5 values(1, 'zhangsan');</span><br><span class="line">ERROR 1062 (23000): Duplicate entry '1' for key 'user5.id'</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user5 values(1, 'lisi');</span><br><span class="line">ERROR 1062 (23000): Duplicate entry '1' for key 'user5.id'</span><br><span class="line"></span><br><span class="line">mysql&gt; create table user6(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; unique(name)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table user7(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20) unique,</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table user8( id int, name varchar(20), unique(id, name));</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user8;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  | MUL | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">desc</span> user7;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  | UNI | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">alter</span> <span class="keyword">table</span> user7 <span class="keyword">drop</span> <span class="keyword">index</span> <span class="keyword">name</span>;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user7;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">alter</span> <span class="keyword">table</span> user7 <span class="keyword">modify</span> <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span>;</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user7;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  | UNI | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>总结：</p>
<ol>
<li>建表时就添加约束；</li>
<li>添加可以使用alter…add…</li>
<li>修改可以使用alter…modify…</li>
<li>删除可以使用alter…drop…</li>
</ol>
</blockquote>
<h4 id="4-not-null修饰的字段不能为空null"><a class="markdownIt-Anchor" href="#4-not-null修饰的字段不能为空null"></a> (4). Not NULL：修饰的字段不能为空NULL</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user9(</span><br><span class="line">    -&gt; id int, </span><br><span class="line">    -&gt; name varchar(20) not null</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.09 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user9;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | NO   |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> user9 (<span class="keyword">id</span>) <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line">ERROR 1364 (HY000): Field 'name' doesn't have a default value</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user9 (name) values('lisi');</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user9;</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">| id   | name |</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">| NULL | lisi |</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="5-default当插入字段值当时候如果没有传值就会使用默认值"><a class="markdownIt-Anchor" href="#5-default当插入字段值当时候如果没有传值就会使用默认值"></a> (5). Default：当插入字段值当时候，如果没有传值，就会使用默认值</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user10(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; age int default 10</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.10 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc user10;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| age   | int         | YES  |     | 10      |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> user10 (<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'zhangsan'</span>);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user10;</span><br><span class="line">+<span class="comment">------+----------+------+</span></span><br><span class="line">| id   | name     | age  |</span><br><span class="line">+<span class="comment">------+----------+------+</span></span><br><span class="line">|    1 | zhangsan |   10 |</span><br><span class="line">+<span class="comment">------+----------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> user10 <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'lisi'</span>, <span class="number">19</span>);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user10;</span><br><span class="line">+<span class="comment">------+----------+------+</span></span><br><span class="line">| id   | name     | age  |</span><br><span class="line">+<span class="comment">------+----------+------+</span></span><br><span class="line">|    1 | zhangsan |   10 |</span><br><span class="line">|    1 | lisi     |   19 |</span><br><span class="line">+<span class="comment">------+----------+------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="6-foreign-key设计到两个表父表子表-or-主表副表"><a class="markdownIt-Anchor" href="#6-foreign-key设计到两个表父表子表-or-主表副表"></a> (6). Foreign key：设计到两个表（父表/子表 or 主表/副表）</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table classes(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.10 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table students(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; class_id int,</span><br><span class="line">    -&gt; foreign key(class_id) references classes(id)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.13 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc classes;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int         | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">desc</span> students;</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id       | int         | NO   | PRI | NULL    |       |</span><br><span class="line">| name     | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| class_id | int         | YES  | MUL | NULL    |       |</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> classes <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'One'</span>);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into classes values(2, 'Two');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into classes values(3, 'Three');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into classes values(4, 'Four');</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+<span class="comment">----+-------+</span></span><br><span class="line">| id | name  |</span><br><span class="line">+<span class="comment">----+-------+</span></span><br><span class="line">|  1 | One   |</span><br><span class="line">|  2 | Two   |</span><br><span class="line">|  3 | Three |</span><br><span class="line">|  4 | Four  |</span><br><span class="line">+<span class="comment">----+-------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> students <span class="keyword">values</span>(<span class="number">1001</span>, <span class="string">'zhangsan'</span>, <span class="number">1</span>);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students values(1002, 'zhangsan', 2);</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students values(1003, 'zhangsan', 3);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students values(1004, 'zhangsan', 4);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students values(1005, 'zhangsan', 5);</span><br><span class="line">ERROR 1452 (23000): Cannot add or <span class="keyword">update</span> a <span class="keyword">child</span> <span class="keyword">row</span>: a <span class="keyword">foreign</span> <span class="keyword">key</span> <span class="keyword">constraint</span> fails (<span class="string">`test`</span>.<span class="string">`students`</span>, <span class="keyword">CONSTRAINT</span> <span class="string">`students_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`class_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`classes`</span> (<span class="string">`id`</span>))</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">delete</span> <span class="keyword">from</span> classes <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">4</span>;</span><br><span class="line">ERROR 1451 (23000): Cannot <span class="keyword">delete</span> <span class="keyword">or</span> <span class="keyword">update</span> a <span class="keyword">parent</span> <span class="keyword">row</span>: a <span class="keyword">foreign</span> <span class="keyword">key</span> <span class="keyword">constraint</span> fails (<span class="string">`test`</span>.<span class="string">`students`</span>, <span class="keyword">CONSTRAINT</span> <span class="string">`students_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`class_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`classes`</span> (<span class="string">`id`</span>))</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>总结：</p>
<ol>
<li>主表classes中没有的数据值，在副表中，是不可以使用的。</li>
<li>主表中的记录被副表引用，是不能被删除的</li>
</ol>
</blockquote>
<h3 id="3-数据库的三大设计范式"><a class="markdownIt-Anchor" href="#3-数据库的三大设计范式"></a> 3. 数据库的三大设计范式</h3>
<h4 id="31-第一范式1nf数据表中的所有字段都是不可分割的原子值"><a class="markdownIt-Anchor" href="#31-第一范式1nf数据表中的所有字段都是不可分割的原子值"></a> 3.1 第一范式(1NF)：数据表中的所有字段都是不可分割的原子值</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table students2(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; address varchar(30)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students2 values(1, 'zhangsan', 'Chian, SiChuan, ChengDu, Avenue 1st');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students2 values(2, 'lisi', 'Chian, SiChuan, ChengDu, Avenue 2nd');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students2 values(3, 'wangwu', 'Chian, SiChuan, ChengDu, Avenue 3rd');</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from students2;</span><br><span class="line">+<span class="comment">----+----------+-------------------------------------+</span></span><br><span class="line">| id | name     | address                             |</span><br><span class="line">+<span class="comment">----+----------+-------------------------------------+</span></span><br><span class="line">|  1 | zhangsan | Chian, SiChuan, ChengDu, Avenue 1st |</span><br><span class="line">|  2 | lisi     | Chian, SiChuan, ChengDu, Avenue 2nd |</span><br><span class="line">|  3 | wangwu   | Chian, SiChuan, ChengDu, Avenue 3rd |</span><br><span class="line">+<span class="comment">----+----------+-------------------------------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>字段值还可以继续拆分的，就不满足第一范式</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table students3(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; country varchar(30),</span><br><span class="line">    -&gt; province varchar(30),</span><br><span class="line">    -&gt; city varchar(30),</span><br><span class="line">    -&gt; details varchar(30)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students3 values(1, 'zhangsan', 'Chian', 'SiChuan', 'ChengDu', 'Avenue 1st');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students3 values(2, 'zhangsan', 'Chian', 'SiChuan', 'ChengDu', 'Avenue 2nd');</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into students3 values(3, 'zhangsan', 'Chian', 'SiChuan', 'ChengDu', 'Avenue 3rd');</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from students3;</span><br><span class="line">+<span class="comment">----+----------+---------+----------+---------+------------+</span></span><br><span class="line">| id | name     | country | province | city    | details    |</span><br><span class="line">+<span class="comment">----+----------+---------+----------+---------+------------+</span></span><br><span class="line">|  1 | zhangsan | Chian   | SiChuan  | ChengDu | Avenue 1st |</span><br><span class="line">|  2 | zhangsan | Chian   | SiChuan  | ChengDu | Avenue 2nd |</span><br><span class="line">|  3 | zhangsan | Chian   | SiChuan  | ChengDu | Avenue 3rd |</span><br><span class="line">+<span class="comment">----+----------+---------+----------+---------+------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>范式，设计得越详细，对于某些实际操作可能越好，但是不一定都是好处</p>
</blockquote>
<h4 id="32-第二范式2nf必须先满足第一范式要求除主键外的每一列都必须完全依赖主键"><a class="markdownIt-Anchor" href="#32-第二范式2nf必须先满足第一范式要求除主键外的每一列都必须完全依赖主键"></a> 3.2 第二范式(2NF)：必须先满足第一范式，要求除主键外的每一列都必须完全依赖主键。</h4>
<blockquote>
<p>如果出现不完全依赖，只可能发生在联合主键的情况下</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table myOrder(		-- 订单表</span><br><span class="line">    -&gt; product_id int,</span><br><span class="line">    -&gt; customer_id int,</span><br><span class="line">    -&gt; product_name varchar(20),</span><br><span class="line">    -&gt; customer_name varchar(20),</span><br><span class="line">    -&gt; primary key(product_id, customer_id)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>上表除主键外的其它字段，只依赖于主键的部分字段，不满足第二范式</p>
<p>解决方式：拆表</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table myOrder(</span><br><span class="line">    -&gt; order_id int primary key,</span><br><span class="line">    -&gt; product_id int,</span><br><span class="line">    -&gt; customer_id int</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table product(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.09 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table customer(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>分成三个表后，满足第二范式</p>
</blockquote>
<h4 id="33-第三范式3nf必须先满足第二范式除了主键列的其它列之间不能有传递依赖关系"><a class="markdownIt-Anchor" href="#33-第三范式3nf必须先满足第二范式除了主键列的其它列之间不能有传递依赖关系"></a> 3.3 第三范式(3NF)：必须先满足第二范式，除了主键列的其它列之间不能有传递依赖关系</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table customer(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; phone varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br></pre></td></tr></table></figure></div>
<h3 id="4-查询练习"><a class="markdownIt-Anchor" href="#4-查询练习"></a> 4. 查询练习</h3>
<h4 id="41-数据表准备"><a class="markdownIt-Anchor" href="#41-数据表准备"></a> 4.1 数据表准备</h4>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database SelectTest;</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; use SelectTest;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学生表</span></span><br><span class="line">mysql&gt; create table student(</span><br><span class="line">    -&gt; sno varchar(20) primary key,</span><br><span class="line">    -&gt; sname varchar(20) not null,</span><br><span class="line">    -&gt; ssex varchar(10) not null,</span><br><span class="line">    -&gt; sbirthday datetime,</span><br><span class="line">    -&gt; class varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+<span class="comment">-----------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field     | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-----------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| sno       | varchar(20) | NO   | PRI | NULL    |       |</span><br><span class="line">| sname     | varchar(20) | NO   |     | NULL    |       |</span><br><span class="line">| ssex      | varchar(10) | NO   |     | NULL    |       |</span><br><span class="line">| sbirthday | datetime    | YES  |     | NULL    |       |</span><br><span class="line">| class     | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-----------+-------------+------+-----+---------+-------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 课程表</span></span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">    -&gt; cno <span class="built_in">varchar</span>(<span class="number">20</span>) primary <span class="keyword">key</span>,</span><br><span class="line">    -&gt; cname <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    -&gt; tno <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>, </span><br><span class="line">    -&gt; <span class="keyword">foreign</span> <span class="keyword">key</span>(tno) <span class="keyword">references</span> teacher(tno)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc course;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| cno   | varchar(20) | NO   | PRI | NULL    |       |</span><br><span class="line">| cname | varchar(20) | NO   |     | NULL    |       |</span><br><span class="line">| tno   | varchar(20) | NO   | MUL | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 成绩表</span></span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">table</span> score(</span><br><span class="line">    -&gt; sno <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    -&gt; cno <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    -&gt; degree <span class="built_in">decimal</span>,</span><br><span class="line">    -&gt; <span class="keyword">foreign</span> <span class="keyword">key</span>(sno) <span class="keyword">references</span> student(sno),</span><br><span class="line">    -&gt; <span class="keyword">foreign</span> <span class="keyword">key</span>(cno) <span class="keyword">references</span> course(cno),</span><br><span class="line">    -&gt; primary <span class="keyword">key</span>(sno, cno)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 教师表</span></span><br><span class="line">mysql&gt; create table teacher(</span><br><span class="line">    -&gt; tno varchar(20) primary key,</span><br><span class="line">    -&gt; tname varchar(20) not null,</span><br><span class="line">    -&gt; tsex varchar(10) not null,</span><br><span class="line">    -&gt; tbierthday datetime,</span><br><span class="line">    -&gt; prof varchar(20),</span><br><span class="line">    -&gt; department varchar(20) not null</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.09 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+<span class="comment">------------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field      | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">------------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| tno        | varchar(20) | NO   | PRI | NULL    |       |</span><br><span class="line">| tname      | varchar(20) | NO   |     | NULL    |       |</span><br><span class="line">| tsex       | varchar(10) | NO   |     | NULL    |       |</span><br><span class="line">| tbierthday | datetime    | YES  |     | NULL    |       |</span><br><span class="line">| prof       | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| department | varchar(20) | NO   |     | NULL    |       |</span><br><span class="line">+<span class="comment">------------+-------------+------+-----+---------+-------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Fill data</span></span><br><span class="line"><span class="comment">-- Student info</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'101'</span>, <span class="string">'A'</span>, <span class="string">'m'</span>, <span class="string">'1900-09-01'</span>, <span class="string">'96033'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'102'</span>, <span class="string">'K'</span>, <span class="string">'m'</span>, <span class="string">'1902-10-01'</span>, <span class="string">'96031'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'103'</span>, <span class="string">'B'</span>, <span class="string">'m'</span>, <span class="string">'1901-01-20'</span>, <span class="string">'96033'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'104'</span>, <span class="string">'C'</span>, <span class="string">'m'</span>, <span class="string">'1901-05-04'</span>, <span class="string">'96033'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'105'</span>, <span class="string">'Y'</span>, <span class="string">'f'</span>, <span class="string">'1900-02-03'</span>, <span class="string">'96031'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'106'</span>, <span class="string">'X'</span>, <span class="string">'m'</span>, <span class="string">'1901-07-15'</span>, <span class="string">'96031'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'107'</span>, <span class="string">'Z'</span>, <span class="string">'m'</span>, <span class="string">'1901-07-15'</span>, <span class="string">'96033'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'108'</span>, <span class="string">'H'</span>, <span class="string">'f'</span>, <span class="string">'1901-07-15'</span>, <span class="string">'96031'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">'109'</span>, <span class="string">'G'</span>, <span class="string">'f'</span>, <span class="string">'1901-07-15'</span>, <span class="string">'96031'</span>);</span><br><span class="line"><span class="comment">-- Teacher info</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'093'</span>, <span class="string">'AA'</span>, <span class="string">'m'</span>, <span class="string">'1887-12-03'</span>, <span class="string">'Prof'</span>, <span class="string">'CS'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'102'</span>, <span class="string">'BB'</span>, <span class="string">'m'</span>, <span class="string">'1898-10-01'</span>, <span class="string">'Lecture'</span>, <span class="string">'EE'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'195'</span>, <span class="string">'CC'</span>, <span class="string">'f'</span>, <span class="string">'1892-02-20'</span>, <span class="string">'Assistant'</span>, <span class="string">'CS'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'209'</span>, <span class="string">'DD'</span>, <span class="string">'f'</span>, <span class="string">'1898-08-03'</span>, <span class="string">'Assistant'</span>, <span class="string">'EE'</span>);</span><br><span class="line"><span class="comment">-- Course info</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'3-105'</span>, <span class="string">'DataStructure'</span>, <span class="string">'102'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'3-245'</span>, <span class="string">'Network'</span>, <span class="string">'195'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'6-295'</span>, <span class="string">'Architecture'</span>, <span class="string">'093'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'10-232'</span>, <span class="string">'System'</span>, <span class="string">'209'</span>);</span><br><span class="line"><span class="comment">-- Score info</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'103'</span>, <span class="string">'3-105'</span>, <span class="string">'76'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'101'</span>, <span class="string">'3-105'</span>, <span class="string">'98'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'102'</span>, <span class="string">'3-245'</span>, <span class="string">'43'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'104'</span>, <span class="string">'6-295'</span>, <span class="string">'74'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'105'</span>, <span class="string">'3-105'</span>, <span class="string">'89'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'105'</span>, <span class="string">'6-295'</span>, <span class="string">'56'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'106'</span>, <span class="string">'10-232'</span>, <span class="string">'75'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'108'</span>, <span class="string">'10-232'</span>, <span class="string">'23'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'107'</span>, <span class="string">'3-105'</span>, <span class="string">'76'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'109'</span>, <span class="string">'6-295'</span>, <span class="string">'62'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'108'</span>, <span class="string">'6-295'</span>, <span class="string">'76'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="string">'107'</span>, <span class="string">'10-232'</span>, <span class="string">'71'</span>);</span><br></pre></td></tr></table></figure></div>
<h4 id="42-查询练习"><a class="markdownIt-Anchor" href="#42-查询练习"></a> 4.2 查询练习</h4>
<h5 id="1-查询student表中的所有记录"><a class="markdownIt-Anchor" href="#1-查询student表中的所有记录"></a> 1. 查询student表中的所有记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 101 | A     | m    | 1900-09-01 00:00:00 | 96033 |</span><br><span class="line">| 102 | K     | m    | 1902-10-01 00:00:00 | 96031 |</span><br><span class="line">| 103 | B     | m    | 1901-01-20 00:00:00 | 96033 |</span><br><span class="line">| 104 | C     | m    | 1901-05-04 00:00:00 | 96033 |</span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 106 | X     | m    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 107 | Z     | m    | 1901-07-15 00:00:00 | 96033 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="2-查询student表中所有记录的sname-ssex-class列"><a class="markdownIt-Anchor" href="#2-查询student表中所有记录的sname-ssex-class列"></a> 2. 查询student表中所有记录的sname、ssex、class列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sname, ssex, class from student;</span><br><span class="line">+<span class="comment">-------+------+-------+</span></span><br><span class="line">| sname | ssex | class |</span><br><span class="line">+<span class="comment">-------+------+-------+</span></span><br><span class="line">| A     | m    | 96033 |</span><br><span class="line">| K     | m    | 96031 |</span><br><span class="line">| B     | m    | 96033 |</span><br><span class="line">| C     | m    | 96033 |</span><br><span class="line">| Y     | f    | 96031 |</span><br><span class="line">| X     | m    | 96031 |</span><br><span class="line">| Z     | m    | 96033 |</span><br><span class="line">| H     | f    | 96031 |</span><br><span class="line">| G     | f    | 96031 |</span><br><span class="line">+<span class="comment">-------+------+-------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="3-查询教师所有的单位即不重复的department列"><a class="markdownIt-Anchor" href="#3-查询教师所有的单位即不重复的department列"></a> 3. 查询教师所有的单位，即不重复的department列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select distinct department from teacher;		-- distinct 去重</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| department |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| CS         |</span><br><span class="line">| EE         |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="4-查询score表中成绩在60-80之间的所有记录查询区间"><a class="markdownIt-Anchor" href="#4-查询score表中成绩在60-80之间的所有记录查询区间"></a> 4. 查询score表中成绩在60-80之间的所有记录(查询区间)</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 法一：between...and...</span></span><br><span class="line">mysql&gt; select * from score where degree between 60 and 80;</span><br><span class="line"><span class="comment">-- 法二：直接用运算符比较</span></span><br><span class="line">mysql&gt; select * from score where degree &gt; 60 and degree &lt; 80;</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| sno | cno    | degree |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| 103 | 3-105  |     76 |</span><br><span class="line">| 104 | 6-295  |     74 |</span><br><span class="line">| 106 | 10-232 |     75 |</span><br><span class="line">| 107 | 10-232 |     71 |</span><br><span class="line">| 107 | 3-105  |     76 |</span><br><span class="line">| 108 | 6-295  |     76 |</span><br><span class="line">| 109 | 6-295  |     62 |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="5-查询score表中成绩为75-76或78的记录"><a class="markdownIt-Anchor" href="#5-查询score表中成绩为75-76或78的记录"></a> 5. 查询score表中成绩为75、76或78的记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表示或关系</span></span><br><span class="line">mysql&gt; select * from score where degree in (75, 76, 78);</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| sno | cno    | degree |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| 103 | 3-105  |     76 |</span><br><span class="line">| 106 | 10-232 |     75 |</span><br><span class="line">| 107 | 3-105  |     76 |</span><br><span class="line">| 108 | 6-295  |     76 |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="6-查询student表中95031班或性别为f的同学记录"><a class="markdownIt-Anchor" href="#6-查询student表中95031班或性别为f的同学记录"></a> 6. 查询student表中‘95031’班或性别为‘f’的同学记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- or 表示或关系</span></span><br><span class="line">mysql&gt; select * from student where class = '95031' or ssex = 'f';</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="7-以class降序查询student表的所有记录"><a class="markdownIt-Anchor" href="#7-以class降序查询student表的所有记录"></a> 7. 以class降序查询student表的所有记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 升序 asc(default)</span></span><br><span class="line">mysql&gt; select * from student order by class asc;</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 102 | K     | m    | 1902-10-01 00:00:00 | 96031 |</span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 106 | X     | m    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 101 | A     | m    | 1900-09-01 00:00:00 | 96033 |</span><br><span class="line">| 103 | B     | m    | 1901-01-20 00:00:00 | 96033 |</span><br><span class="line">| 104 | C     | m    | 1901-05-04 00:00:00 | 96033 |</span><br><span class="line">| 107 | Z     | m    | 1901-07-15 00:00:00 | 96033 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 降序 desc</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">class</span> <span class="keyword">desc</span>;</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 101 | A     | m    | 1900-09-01 00:00:00 | 96033 |</span><br><span class="line">| 103 | B     | m    | 1901-01-20 00:00:00 | 96033 |</span><br><span class="line">| 104 | C     | m    | 1901-05-04 00:00:00 | 96033 |</span><br><span class="line">| 107 | Z     | m    | 1901-07-15 00:00:00 | 96033 |</span><br><span class="line">| 102 | K     | m    | 1902-10-01 00:00:00 | 96031 |</span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 106 | X     | m    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="8-以cno升序-degree降序查询score表的所有记录"><a class="markdownIt-Anchor" href="#8-以cno升序-degree降序查询score表的所有记录"></a> 8. 以cno升序、degree降序查询score表的所有记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from score order by cno asc, degree desc;</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| sno | cno    | degree |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| 106 | 10-232 |     75 |</span><br><span class="line">| 107 | 10-232 |     71 |</span><br><span class="line">| 108 | 10-232 |     23 |</span><br><span class="line">| 101 | 3-105  |     98 |</span><br><span class="line">| 105 | 3-105  |     89 |</span><br><span class="line">| 103 | 3-105  |     76 |</span><br><span class="line">| 107 | 3-105  |     76 |</span><br><span class="line">| 102 | 3-245  |     43 |</span><br><span class="line">| 108 | 6-295  |     76 |</span><br><span class="line">| 104 | 6-295  |     74 |</span><br><span class="line">| 109 | 6-295  |     62 |</span><br><span class="line">| 105 | 6-295  |     56 |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="9-查询96031班的学生人数"><a class="markdownIt-Anchor" href="#9-查询96031班的学生人数"></a> 9. 查询‘96031’班的学生人数</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*) from student where class = '96031';</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| count(*) |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">|        5 |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="10-查询score表中的最高分的学生学好和课程好子查询或排序"><a class="markdownIt-Anchor" href="#10-查询score表中的最高分的学生学好和课程好子查询或排序"></a> 10. 查询score表中的最高分的学生学好和课程好（子查询或排序）</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sno, cno from score where degree = (select max(degree) from score);</span><br><span class="line">+<span class="comment">-----+-------+</span></span><br><span class="line">| sno | cno   |</span><br><span class="line">+<span class="comment">-----+-------+</span></span><br><span class="line">| 101 | 3-105 |</span><br><span class="line">+<span class="comment">-----+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Step 1. 找到最高分</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(degree) <span class="keyword">from</span> score;</span><br><span class="line"><span class="comment">-- Step 2. 找最高分的sno和cno</span></span><br><span class="line"><span class="keyword">select</span> sno, cno <span class="keyword">from</span> score <span class="keyword">where</span> degree = (<span class="keyword">select</span> <span class="keyword">max</span>(degree) <span class="keyword">from</span> score);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 排序的做法</span></span><br><span class="line">mysql&gt; select sno, cno, degree from score order by degree;</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| sno | cno    | degree |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| 108 | 10-232 |     23 |</span><br><span class="line">| 102 | 3-245  |     43 |</span><br><span class="line">| 105 | 6-295  |     56 |</span><br><span class="line">| 109 | 6-295  |     62 |</span><br><span class="line">| 107 | 10-232 |     71 |</span><br><span class="line">| 104 | 6-295  |     74 |</span><br><span class="line">| 106 | 10-232 |     75 |</span><br><span class="line">| 103 | 3-105  |     76 |</span><br><span class="line">| 107 | 3-105  |     76 |</span><br><span class="line">| 108 | 6-295  |     76 |</span><br><span class="line">| 105 | 3-105  |     89 |</span><br><span class="line">| 101 | 3-105  |     98 |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sno, cno, degree <span class="keyword">from</span> score <span class="keyword">order</span> <span class="keyword">by</span> degree <span class="keyword">limit</span> <span class="number">0</span>, <span class="number">1</span>;	<span class="comment">-- 0：起点，1：查几条</span></span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| sno | cno    | degree |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| 108 | 10-232 |     23 |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sno, cno, degree <span class="keyword">from</span> score <span class="keyword">order</span> <span class="keyword">by</span> degree <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">0</span>, <span class="number">1</span>;</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| sno | cno   | degree |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| 101 | 3-105 |     98 |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="11-查询每门课的平均成绩"><a class="markdownIt-Anchor" href="#11-查询每门课的平均成绩"></a> 11. 查询每门课的平均成绩</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- avg()</span></span><br><span class="line">mysql&gt; select avg(degree) from score where cno = '3-105';</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">| avg(degree) |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">|     84.7500 |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- group by 分组</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> cno, <span class="keyword">avg</span>(degree) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line">+<span class="comment">--------+-------------+</span></span><br><span class="line">| cno    | avg(degree) |</span><br><span class="line">+<span class="comment">--------+-------------+</span></span><br><span class="line">| 10-232 |     56.3333 |</span><br><span class="line">| 3-105  |     84.7500 |</span><br><span class="line">| 3-245  |     43.0000 |</span><br><span class="line">| 6-295  |     67.0000 |</span><br><span class="line">+<span class="comment">--------+-------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="12-查询score表中至少有2名学生选修的并以3开头的课程的平均分数"><a class="markdownIt-Anchor" href="#12-查询score表中至少有2名学生选修的并以3开头的课程的平均分数"></a> 12. 查询score表中至少有2名学生选修的并以3开头的课程的平均分数</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- score表中至少有2名学生选修的并以3开头的课程</span></span><br><span class="line"><span class="comment">-- group by 后跟的条件要用having</span></span><br><span class="line"><span class="comment">-- like 模糊查询</span></span><br><span class="line">mysql&gt; select cno from score group by cno having count(cno) &gt;= 2 and cno like '3%';</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| cno   |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 3-105 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- score表中至少有2名学生选修的并以3开头的课程的平均分数</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> cno, <span class="keyword">avg</span>(degree), <span class="keyword">count</span>(*) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(cno) &gt;= <span class="number">2</span> <span class="keyword">and</span> cno <span class="keyword">like</span> <span class="string">'3%'</span>;</span><br><span class="line">+<span class="comment">-------+-------------+----------+</span></span><br><span class="line">| cno   | avg(degree) | count(*) |</span><br><span class="line">+<span class="comment">-------+-------------+----------+</span></span><br><span class="line">| 3-105 |     84.7500 |        4 |</span><br><span class="line">+<span class="comment">-------+-------------+----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="13-查询分数大于70小于90的sno列"><a class="markdownIt-Anchor" href="#13-查询分数大于70小于90的sno列"></a> 13. 查询分数大于70，小于90的sno列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 法一：</span></span><br><span class="line">mysql&gt; select sno, degree from score</span><br><span class="line">    -&gt; where degree &gt; 70 and degree &lt; 90;</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| sno | degree |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| 103 |     76 |</span><br><span class="line">| 104 |     74 |</span><br><span class="line">| 105 |     89 |</span><br><span class="line">| 106 |     75 |</span><br><span class="line">| 107 |     71 |</span><br><span class="line">| 107 |     76 |</span><br><span class="line">| 108 |     76 |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 法二：</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sno, degree <span class="keyword">from</span> score <span class="keyword">where</span> degree <span class="keyword">between</span> <span class="number">70</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| sno | degree |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| 103 |     76 |</span><br><span class="line">| 104 |     74 |</span><br><span class="line">| 105 |     89 |</span><br><span class="line">| 106 |     75 |</span><br><span class="line">| 107 |     71 |</span><br><span class="line">| 107 |     76 |</span><br><span class="line">| 108 |     76 |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="14-查询所有学生的sname-cno和degree列"><a class="markdownIt-Anchor" href="#14-查询所有学生的sname-cno和degree列"></a> 14. 查询所有学生的sname、cno和degree列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select student.sname, score.cno, score.degree from student, score where student.sno = score.sno;</span><br><span class="line">+<span class="comment">-------+--------+--------+</span></span><br><span class="line">| sname | cno    | degree |</span><br><span class="line">+<span class="comment">-------+--------+--------+</span></span><br><span class="line">| A     | 3-105  |     98 |</span><br><span class="line">| K     | 3-245  |     43 |</span><br><span class="line">| B     | 3-105  |     76 |</span><br><span class="line">| C     | 6-295  |     74 |</span><br><span class="line">| Y     | 3-105  |     89 |</span><br><span class="line">| Y     | 6-295  |     56 |</span><br><span class="line">| X     | 10-232 |     75 |</span><br><span class="line">| Z     | 10-232 |     71 |</span><br><span class="line">| Z     | 3-105  |     76 |</span><br><span class="line">| H     | 10-232 |     23 |</span><br><span class="line">| H     | 6-295  |     76 |</span><br><span class="line">| G     | 6-295  |     62 |</span><br><span class="line">+<span class="comment">-------+--------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="15-查询所有学生的sno-cname-degree列"><a class="markdownIt-Anchor" href="#15-查询所有学生的sno-cname-degree列"></a> 15. 查询所有学生的sno、cname、degree列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select score.sno, course.cname, score.degree from score, course where score.cno = course.cno;</span><br><span class="line">+<span class="comment">-----+---------------+--------+</span></span><br><span class="line">| sno | cname         | degree |</span><br><span class="line">+<span class="comment">-----+---------------+--------+</span></span><br><span class="line">| 106 | System        |     75 |</span><br><span class="line">| 107 | System        |     71 |</span><br><span class="line">| 108 | System        |     23 |</span><br><span class="line">| 101 | DataStructure |     98 |</span><br><span class="line">| 103 | DataStructure |     76 |</span><br><span class="line">| 105 | DataStructure |     89 |</span><br><span class="line">| 107 | DataStructure |     76 |</span><br><span class="line">| 102 | Network       |     43 |</span><br><span class="line">| 104 | Architecture  |     74 |</span><br><span class="line">| 105 | Architecture  |     56 |</span><br><span class="line">| 108 | Architecture  |     76 |</span><br><span class="line">| 109 | Architecture  |     62 |</span><br><span class="line">+<span class="comment">-----+---------------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="16-查询所有学生的sname-cname-degree列"><a class="markdownIt-Anchor" href="#16-查询所有学生的sname-cname-degree列"></a> 16. 查询所有学生的sname、cname、degree列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select student.sname, course.cname, score.degree from student, score, course where student.sno = score.sno and course.cno = score.cno;</span><br><span class="line">+<span class="comment">-------+---------------+--------+</span></span><br><span class="line">| sname | cname         | degree |</span><br><span class="line">+<span class="comment">-------+---------------+--------+</span></span><br><span class="line">| X     | System        |     75 |</span><br><span class="line">| Z     | System        |     71 |</span><br><span class="line">| H     | System        |     23 |</span><br><span class="line">| A     | DataStructure |     98 |</span><br><span class="line">| B     | DataStructure |     76 |</span><br><span class="line">| Y     | DataStructure |     89 |</span><br><span class="line">| Z     | DataStructure |     76 |</span><br><span class="line">| K     | Network       |     43 |</span><br><span class="line">| C     | Architecture  |     74 |</span><br><span class="line">| Y     | Architecture  |     56 |</span><br><span class="line">| H     | Architecture  |     76 |</span><br><span class="line">| G     | Architecture  |     62 |</span><br><span class="line">+<span class="comment">-------+---------------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="17-查询96031班学生每门课的平均分"><a class="markdownIt-Anchor" href="#17-查询96031班学生每门课的平均分"></a> 17. 查询‘96031’班学生每门课的平均分</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选出96031班的所有学生</span></span><br><span class="line">mysql&gt; select sno from student where class = '96031';</span><br><span class="line"><span class="comment">-- 选出96031班所有学生的信息</span></span><br><span class="line">mysql&gt; select * from score where sno in (select sno from student where class = '96031');</span><br><span class="line"><span class="comment">-- 查询‘96031’班学生每门课的平均分</span></span><br><span class="line">mysql&gt; select cno, avg(degree) from score where sno in (select sno from student where class = '96031') group by cno;</span><br><span class="line">+<span class="comment">--------+-------------+</span></span><br><span class="line">| cno    | avg(degree) |</span><br><span class="line">+<span class="comment">--------+-------------+</span></span><br><span class="line">| 3-245  |     43.0000 |</span><br><span class="line">| 3-105  |     89.0000 |</span><br><span class="line">| 6-295  |     64.6667 |</span><br><span class="line">| 10-232 |     49.0000 |</span><br><span class="line">+<span class="comment">--------+-------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="18-查询选修3-105课程的成绩高于103号同学3-105成绩的所有同学的成绩"><a class="markdownIt-Anchor" href="#18-查询选修3-105课程的成绩高于103号同学3-105成绩的所有同学的成绩"></a> 18. 查询选修“3-105”课程的成绩高于“103”号同学“3-105”成绩的所有同学的成绩</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选出“103”号同学“3-105”成绩</span></span><br><span class="line"><span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> sno = <span class="string">'103'</span>;</span><br><span class="line"><span class="comment">-- 选出所有选修“3-105”的同学</span></span><br><span class="line"><span class="keyword">select</span> sno, degree <span class="keyword">from</span> score <span class="keyword">where</span> cno = <span class="string">'3-105'</span>;</span><br><span class="line"><span class="comment">-- 查询选修“3-105”课程的，并且成绩高于“103”号同学“3-105”成绩的，所有同学的成绩</span></span><br><span class="line">mysql&gt; select sno, degree from score where cno = '3-105' and degree &gt; (select degree from score where sno = '103'); </span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| sno | degree |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| 101 |     98 |</span><br><span class="line">| 105 |     89 |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="19-查询成绩高于学号为103-课程号为3-105的成绩的所有记录"><a class="markdownIt-Anchor" href="#19-查询成绩高于学号为103-课程号为3-105的成绩的所有记录"></a> 19. 查询成绩高于学号为“103”、课程号为“3-105”的成绩的所有记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from score where degree &gt; (select degree from score where sno = '103' and cno = '3-105');</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| sno | cno   | degree |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| 101 | 3-105 |     98 |</span><br><span class="line">| 105 | 3-105 |     89 |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="20-查询和学号为108-101的同学同年出生的所有学生的sno-sname和sbirthday列"><a class="markdownIt-Anchor" href="#20-查询和学号为108-101的同学同年出生的所有学生的sno-sname和sbirthday列"></a> 20. 查询和学号为‘108’、‘101‘的同学，同年出生的所有学生的sno、sname和sbirthday列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选出学号为‘108’、‘101‘的同学的sbirthday</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(sbirthday) <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="keyword">in</span> (<span class="string">'108'</span>, <span class="string">'101'</span>);</span><br><span class="line"><span class="comment">-- 和学号为‘108’、‘101‘的同学，同年出生的所有学生的sno、sname和sbirthday列</span></span><br><span class="line">mysql&gt; select sno, sname, sbirthday from student where year(sbirthday) in (select year(sbirthday) from student where sno in ('108', '101'));</span><br><span class="line">+<span class="comment">-----+-------+---------------------+</span></span><br><span class="line">| sno | sname | sbirthday           |</span><br><span class="line">+<span class="comment">-----+-------+---------------------+</span></span><br><span class="line">| 101 | A     | 1900-09-01 00:00:00 |</span><br><span class="line">| 103 | B     | 1901-01-20 00:00:00 |</span><br><span class="line">| 104 | C     | 1901-05-04 00:00:00 |</span><br><span class="line">| 105 | Y     | 1900-02-03 00:00:00 |</span><br><span class="line">| 106 | X     | 1901-07-15 00:00:00 |</span><br><span class="line">| 107 | Z     | 1901-07-15 00:00:00 |</span><br><span class="line">| 108 | H     | 1901-07-15 00:00:00 |</span><br><span class="line">| 109 | G     | 1901-07-15 00:00:00 |</span><br><span class="line">+<span class="comment">-----+-------+---------------------+</span></span><br><span class="line">8 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="21-查询aa教师任课的学生成绩"><a class="markdownIt-Anchor" href="#21-查询aa教师任课的学生成绩"></a> 21. 查询AA教师任课的学生成绩</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先查出AA教师的教师编号</span></span><br><span class="line">mysql&gt; select tno from teacher where tname = 'AA';</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| tno |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| 093 |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 再查出查出AA教师任教的课程</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span> (<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname = <span class="string">'AA'</span>);</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| cno   |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 6-295 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 最后查出AA教师任课的学生成绩</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> score <span class="keyword">where</span> cno <span class="keyword">in</span> (<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span> (<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname = <span class="string">'AA'</span>));</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| sno | cno   | degree |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| 104 | 6-295 |     74 |</span><br><span class="line">| 105 | 6-295 |     56 |</span><br><span class="line">| 108 | 6-295 |     76 |</span><br><span class="line">| 109 | 6-295 |     62 |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="22-查询选修某课程的同学人数多于3人的教师姓名"><a class="markdownIt-Anchor" href="#22-查询选修某课程的同学人数多于3人的教师姓名"></a> 22. 查询选修某课程的同学人数多于3人的教师姓名</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先查询选修每门课程的同学人数</span></span><br><span class="line">mysql&gt; select cno, count(sno) from score group by cno;</span><br><span class="line">+<span class="comment">--------+------------+</span></span><br><span class="line">| cno    | count(sno) |</span><br><span class="line">+<span class="comment">--------+------------+</span></span><br><span class="line">| 10-232 |          3 |</span><br><span class="line">| 3-105  |          4 |</span><br><span class="line">| 3-245  |          1 |</span><br><span class="line">| 6-295  |          4 |</span><br><span class="line">+<span class="comment">--------+------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 再查询选修人数多于3人的课程号</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">3</span>;</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| cno   |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 3-105 |</span><br><span class="line">| 6-295 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 再查询这两门课任教的教师编号</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> tno <span class="keyword">from</span> course <span class="keyword">where</span> cno <span class="keyword">in</span> (<span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">3</span>);</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| tno |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| 093 |</span><br><span class="line">| 102 |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 最后查教师姓名</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> tname <span class="keyword">from</span> teacher <span class="keyword">where</span> tno <span class="keyword">in</span> (<span class="keyword">select</span> tno <span class="keyword">from</span> course <span class="keyword">where</span> cno <span class="keyword">in</span> (<span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">3</span>));</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| tname |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| AA    |</span><br><span class="line">| BB    |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="23-查询96031和96033班全体学生的记录"><a class="markdownIt-Anchor" href="#23-查询96031和96033班全体学生的记录"></a> 23. 查询96031和96033班全体学生的记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student where class in ('96031', '96033');</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 101 | A     | m    | 1900-09-01 00:00:00 | 96033 |</span><br><span class="line">| 102 | K     | m    | 1902-10-01 00:00:00 | 96031 |</span><br><span class="line">| 103 | B     | m    | 1901-01-20 00:00:00 | 96033 |</span><br><span class="line">| 104 | C     | m    | 1901-05-04 00:00:00 | 96033 |</span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 106 | X     | m    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 107 | Z     | m    | 1901-07-15 00:00:00 | 96033 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="24-查询存在有85分以上成绩的课程号"><a class="markdownIt-Anchor" href="#24-查询存在有85分以上成绩的课程号"></a> 24. 查询存在有85分以上成绩的课程号</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select cno, degree from score where degree &gt; 85;</span><br><span class="line">+<span class="comment">-------+--------+</span></span><br><span class="line">| cno   | degree |</span><br><span class="line">+<span class="comment">-------+--------+</span></span><br><span class="line">| 3-105 |     98 |</span><br><span class="line">| 3-105 |     89 |</span><br><span class="line">+<span class="comment">-------+--------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="25-查询出cs系教师所教课程的成绩表"><a class="markdownIt-Anchor" href="#25-查询出cs系教师所教课程的成绩表"></a> 25. 查询出CS系教师所教课程的成绩表</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先查出教CS的教师的教师编号</span></span><br><span class="line">mysql&gt; select tno from teacher where department = 'CS';</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| tno |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| 093 |</span><br><span class="line">| 195 |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 再查出这些教师所教的课程号</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span> (<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span>);</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| cno   |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 6-295 |</span><br><span class="line">| 3-245 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 最后查出score表中的degree</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> cno, degree <span class="keyword">from</span> score <span class="keyword">where</span> cno <span class="keyword">in</span> (<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span> (<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span>));</span><br><span class="line">+<span class="comment">-------+--------+</span></span><br><span class="line">| cno   | degree |</span><br><span class="line">+<span class="comment">-------+--------+</span></span><br><span class="line">| 6-295 |     74 |</span><br><span class="line">| 6-295 |     56 |</span><br><span class="line">| 6-295 |     76 |</span><br><span class="line">| 6-295 |     62 |</span><br><span class="line">| 3-245 |     43 |</span><br><span class="line">+<span class="comment">-------+--------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="26-查询cs系和ee系不同职称的教师的tname和prof"><a class="markdownIt-Anchor" href="#26-查询cs系和ee系不同职称的教师的tname和prof"></a> 26. 查询“CS”系和“EE”系不同职称的教师的tname和prof</h5>
<blockquote>
<p>union：求并集</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from teacher;</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-----------+------------+</span></span><br><span class="line">| tno | tname | tsex | tbierthday          | prof      | department |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-----------+------------+</span></span><br><span class="line">| 093 | AA    | m    | 1887-12-03 00:00:00 | Prof      | CS         |</span><br><span class="line">| 102 | BB    | m    | 1898-10-01 00:00:00 | Lecture   | EE         |</span><br><span class="line">| 195 | CC    | f    | 1892-02-20 00:00:00 | Assistant | CS         |</span><br><span class="line">| 209 | DD    | f    | 1898-08-03 00:00:00 | Assistant | EE         |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-----------+------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查询CS系有的职称</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span>;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| prof      |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| Prof      |</span><br><span class="line">| Assistant |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查询EE系有的职称</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'EE'</span>;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| prof      |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| Lecture   |</span><br><span class="line">| Assistant |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查询CS有而EE没有的职称</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'EE'</span>);</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| prof |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| Prof |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 查询EE有而CS没有的职称</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'EE'</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span>);</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| prof    |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| Lecture |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- union</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'EE'</span>)</span><br><span class="line">    -&gt; <span class="keyword">union</span></span><br><span class="line">    -&gt; <span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'EE'</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> department = <span class="string">'CS'</span>);</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| prof    |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| Prof    |</span><br><span class="line">| Lecture |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="27-查询选修编号为3-105课程且成绩至少高于选修编号为3-245课程的同学的cnosno和degree并且按照degree从高到地次序排序"><a class="markdownIt-Anchor" href="#27-查询选修编号为3-105课程且成绩至少高于选修编号为3-245课程的同学的cnosno和degree并且按照degree从高到地次序排序"></a> 27. 查询选修编号为&quot;3-105&quot;课程且成绩<em>至少</em>高于选修编号为’3-245’课程的同学的cno，sno和degree，并且按照degree从高到地次序排序</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先查询选修‘3-105’课程的同学</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> score <span class="keyword">where</span> cno = <span class="string">'3-105'</span>;</span><br><span class="line"><span class="comment">-- 再查选修‘3-245’课程的同学的成绩</span></span><br><span class="line"><span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> cno = <span class="string">'3-245'</span>;</span><br><span class="line"><span class="comment">-- 最后查询选修编号为"3-105"课程且成绩至少高于选修编号为'3-245'课程的同学的cno，sno和degree，并且按照degree从高到地次序排序</span></span><br><span class="line">mysql&gt; select cno, sno, degree from score where cno = '3-105' and degree &gt; any(select degree from score where cno = '3-245') order by degree desc;</span><br><span class="line">+<span class="comment">-------+-----+--------+</span></span><br><span class="line">| cno   | sno | degree |</span><br><span class="line">+<span class="comment">-------+-----+--------+</span></span><br><span class="line">| 3-105 | 101 |     98 |</span><br><span class="line">| 3-105 | 105 |     89 |</span><br><span class="line">| 3-105 | 103 |     76 |</span><br><span class="line">| 3-105 | 107 |     76 |</span><br><span class="line">+<span class="comment">-------+-----+--------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="28-查询选修编号为3-105且成绩高于选修编号为3-245课程的同学cnosno和degree"><a class="markdownIt-Anchor" href="#28-查询选修编号为3-105且成绩高于选修编号为3-245课程的同学cnosno和degree"></a> 28. 查询选修编号为&quot;3-105&quot;且成绩高于选修编号为&quot;3-245&quot;课程的同学cno，sno和degree</h5>
<blockquote>
<p>all：表示所有</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select cno, sno, degree from score where cno = '3-105' and degree &gt; all(select degree from score where cno = '3-245');</span><br><span class="line">+<span class="comment">-------+-----+--------+</span></span><br><span class="line">| cno   | sno | degree |</span><br><span class="line">+<span class="comment">-------+-----+--------+</span></span><br><span class="line">| 3-105 | 101 |     98 |</span><br><span class="line">| 3-105 | 103 |     76 |</span><br><span class="line">| 3-105 | 105 |     89 |</span><br><span class="line">| 3-105 | 107 |     76 |</span><br><span class="line">+<span class="comment">-------+-----+--------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="29-查询所有教师和同学的-name-sex-birthday"><a class="markdownIt-Anchor" href="#29-查询所有教师和同学的-name-sex-birthday"></a> 29. 查询所有教师和同学的 name ,sex, birthday</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查出教师姓名</span></span><br><span class="line"><span class="keyword">select</span> tname <span class="keyword">as</span> <span class="keyword">name</span>, tsex, tbirthday <span class="keyword">from</span> teacher;</span><br><span class="line"><span class="comment">-- 查出学生姓名</span></span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">as</span> <span class="keyword">name</span>, ssex, sbirthday <span class="keyword">form</span> student;</span><br><span class="line"><span class="comment">-- 并集</span></span><br><span class="line">mysql&gt; select tname as name, tsex as sex, tbierthday as birthday from teacher</span><br><span class="line">    -&gt; union</span><br><span class="line">    -&gt; select sname, ssex, sbirthday from student;		-- 第二排会以第一排为准</span><br><span class="line">+<span class="comment">------+-----+---------------------+</span></span><br><span class="line">| name | sex | birthday            |</span><br><span class="line">+<span class="comment">------+-----+---------------------+</span></span><br><span class="line">| AA   | m   | 1887-12-03 00:00:00 |</span><br><span class="line">| BB   | m   | 1898-10-01 00:00:00 |</span><br><span class="line">| CC   | f   | 1892-02-20 00:00:00 |</span><br><span class="line">| DD   | f   | 1898-08-03 00:00:00 |</span><br><span class="line">| A    | m   | 1900-09-01 00:00:00 |</span><br><span class="line">| K    | m   | 1902-10-01 00:00:00 |</span><br><span class="line">| B    | m   | 1901-01-20 00:00:00 |</span><br><span class="line">| C    | m   | 1901-05-04 00:00:00 |</span><br><span class="line">| Y    | f   | 1900-02-03 00:00:00 |</span><br><span class="line">| X    | m   | 1901-07-15 00:00:00 |</span><br><span class="line">| Z    | m   | 1901-07-15 00:00:00 |</span><br><span class="line">| H    | f   | 1901-07-15 00:00:00 |</span><br><span class="line">| G    | f   | 1901-07-15 00:00:00 |</span><br><span class="line">+<span class="comment">------+-----+---------------------+</span></span><br><span class="line">13 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="30查询所有女教师和女学生的namesexbirthday"><a class="markdownIt-Anchor" href="#30查询所有女教师和女学生的namesexbirthday"></a> 30.查询所有’女’教师和’女’学生的name,sex,birthday</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有女教师的name，sex和birthday</span></span><br><span class="line">mysql&gt; select tname, tsex, tbierthday from teacher where tsex = 'f';</span><br><span class="line">+<span class="comment">-------+------+---------------------+</span></span><br><span class="line">| tname | tsex | tbierthday          |</span><br><span class="line">+<span class="comment">-------+------+---------------------+</span></span><br><span class="line">| CC    | f    | 1892-02-20 00:00:00 |</span><br><span class="line">| DD    | f    | 1898-08-03 00:00:00 |</span><br><span class="line">+<span class="comment">-------+------+---------------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 查询所有女学生的name，sex和birthday</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sname, ssex, sbirthday <span class="keyword">from</span> student <span class="keyword">where</span> ssex = <span class="string">'f'</span>;</span><br><span class="line">+<span class="comment">-------+------+---------------------+</span></span><br><span class="line">| sname | ssex | sbirthday           |</span><br><span class="line">+<span class="comment">-------+------+---------------------+</span></span><br><span class="line">| Y     | f    | 1900-02-03 00:00:00 |</span><br><span class="line">| H     | f    | 1901-07-15 00:00:00 |</span><br><span class="line">| G     | f    | 1901-07-15 00:00:00 |</span><br><span class="line">+<span class="comment">-------+------+---------------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 查询所有'女'教师和'女'学生的name,sex,birthday</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> tname <span class="keyword">as</span> <span class="keyword">name</span>, tsex <span class="keyword">as</span> sex, tbierthday <span class="keyword">as</span> birthday <span class="keyword">from</span> teacher <span class="keyword">where</span> tsex = <span class="string">'f'</span></span><br><span class="line">    -&gt; <span class="keyword">union</span></span><br><span class="line">    -&gt; <span class="keyword">select</span> sname, ssex, sbirthday <span class="keyword">from</span> student <span class="keyword">where</span> ssex = <span class="string">'f'</span>;</span><br><span class="line">+<span class="comment">------+-----+---------------------+</span></span><br><span class="line">| name | sex | birthday            |</span><br><span class="line">+<span class="comment">------+-----+---------------------+</span></span><br><span class="line">| CC   | f   | 1892-02-20 00:00:00 |</span><br><span class="line">| DD   | f   | 1898-08-03 00:00:00 |</span><br><span class="line">| Y    | f   | 1900-02-03 00:00:00 |</span><br><span class="line">| H    | f   | 1901-07-15 00:00:00 |</span><br><span class="line">| G    | f   | 1901-07-15 00:00:00 |</span><br><span class="line">+<span class="comment">------+-----+---------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="31查询成绩比该课程平均成绩低的同学的成绩表"><a class="markdownIt-Anchor" href="#31查询成绩比该课程平均成绩低的同学的成绩表"></a> 31.查询成绩比该课程平均成绩低的同学的成绩表</h5>
<blockquote>
<p>复制表数据做条件查询</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询每门课程的平均成绩</span></span><br><span class="line"><span class="keyword">select</span> cno, <span class="keyword">avg</span>(degree) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line"><span class="comment">-- 查询成绩比该课程平均成绩低的同学的成绩表</span></span><br><span class="line">mysql&gt; select * from score a where a.degree &lt; (select avg(b.degree) from score b where a.cno = b.cno);</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| sno | cno    | degree |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">| 103 | 3-105  |     76 |</span><br><span class="line">| 105 | 6-295  |     56 |</span><br><span class="line">| 107 | 3-105  |     76 |</span><br><span class="line">| 108 | 10-232 |     23 |</span><br><span class="line">| 109 | 6-295  |     62 |</span><br><span class="line">+<span class="comment">-----+--------+--------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="32查询所有任课教师的tname和department要在分数表中可以查得到"><a class="markdownIt-Anchor" href="#32查询所有任课教师的tname和department要在分数表中可以查得到"></a> 32.查询所有任课教师的tname和department(要在分数表中可以查得到)</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select tname, department from teacher where tno in (select tno from course);</span><br><span class="line">+<span class="comment">-------+------------+</span></span><br><span class="line">| tname | department |</span><br><span class="line">+<span class="comment">-------+------------+</span></span><br><span class="line">| AA    | CS         |</span><br><span class="line">| BB    | EE         |</span><br><span class="line">| CC    | CS         |</span><br><span class="line">| DD    | EE         |</span><br><span class="line">+<span class="comment">-------+------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="33查出至少有2名男生的班号"><a class="markdownIt-Anchor" href="#33查出至少有2名男生的班号"></a> 33.查出至少有2名男生的班号</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select class from student where ssex = 'm' group by class having count(*) &gt; 1;</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| class |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 96033 |</span><br><span class="line">| 96031 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="34查询student-表中不姓a的同学的记录"><a class="markdownIt-Anchor" href="#34查询student-表中不姓a的同学的记录"></a> 34.查询student 表中不姓&quot;A&quot;的同学的记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student where sname not like 'A%';</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 102 | K     | m    | 1902-10-01 00:00:00 | 96031 |</span><br><span class="line">| 103 | B     | m    | 1901-01-20 00:00:00 | 96033 |</span><br><span class="line">| 104 | C     | m    | 1901-05-04 00:00:00 | 96033 |</span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 106 | X     | m    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 107 | Z     | m    | 1901-07-15 00:00:00 | 96033 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">8 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="35-查询student中每个学生的姓名和年龄"><a class="markdownIt-Anchor" href="#35-查询student中每个学生的姓名和年龄"></a> 35. 查询student中每个学生的姓名和年龄</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 年龄 = 当前时间 - 出生年份</span></span><br><span class="line">mysql&gt; select year(now());</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">| year(now()) |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">|        2020 |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- </span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">year</span>(sbirthday) <span class="keyword">from</span> student;</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| year(sbirthday) |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">|            1900 |</span><br><span class="line">|            1902 |</span><br><span class="line">|            1901 |</span><br><span class="line">|            1901 |</span><br><span class="line">|            1900 |</span><br><span class="line">|            1901 |</span><br><span class="line">|            1901 |</span><br><span class="line">|            1901 |</span><br><span class="line">|            1901 |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 查询student中每个学生的姓名和年龄</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sname, (<span class="keyword">year</span>(<span class="keyword">now</span>()) - <span class="keyword">year</span>(sbirthday)) <span class="keyword">as</span> age <span class="keyword">from</span> student;</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">| sname | age  |</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">| A     |  120 |</span><br><span class="line">| K     |  118 |</span><br><span class="line">| B     |  119 |</span><br><span class="line">| C     |  119 |</span><br><span class="line">| Y     |  120 |</span><br><span class="line">| X     |  119 |</span><br><span class="line">| Z     |  119 |</span><br><span class="line">| H     |  119 |</span><br><span class="line">| G     |  119 |</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="36-查询student中最大和最小的sbirthday的值"><a class="markdownIt-Anchor" href="#36-查询student中最大和最小的sbirthday的值"></a> 36. 查询student中最大和最小的sbirthday的值</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select max(sbirthday) as Youngest, min(sbirthday) as Eldest from student;</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| Youngest            | Eldest              |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| 1902-10-01 00:00:00 | 1900-02-03 00:00:00 |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="37-以班级号和年龄从大到小的顺序查询student表中的全部记录"><a class="markdownIt-Anchor" href="#37-以班级号和年龄从大到小的顺序查询student表中的全部记录"></a> 37. 以班级号和年龄从大到小的顺序查询student表中的全部记录</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student order by class desc, (now() - sbirthday) desc;</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| sno | sname | ssex | sbirthday           | class |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">| 101 | A     | m    | 1900-09-01 00:00:00 | 96033 |</span><br><span class="line">| 103 | B     | m    | 1901-01-20 00:00:00 | 96033 |</span><br><span class="line">| 104 | C     | m    | 1901-05-04 00:00:00 | 96033 |</span><br><span class="line">| 107 | Z     | m    | 1901-07-15 00:00:00 | 96033 |</span><br><span class="line">| 105 | Y     | f    | 1900-02-03 00:00:00 | 96031 |</span><br><span class="line">| 106 | X     | m    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 108 | H     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 109 | G     | f    | 1901-07-15 00:00:00 | 96031 |</span><br><span class="line">| 102 | K     | m    | 1902-10-01 00:00:00 | 96031 |</span><br><span class="line">+<span class="comment">-----+-------+------+---------------------+-------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="38查询男教师及其所上的课"><a class="markdownIt-Anchor" href="#38查询男教师及其所上的课"></a> 38.查询&quot;男&quot;教师及其所上的课</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询出男教师</span></span><br><span class="line"><span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tsex = <span class="string">'m'</span>;</span><br><span class="line"><span class="comment">-- 查询"男"教师 及其所上的课</span></span><br><span class="line">mysql&gt; select cno from course where tno in (select tno from teacher where tsex = 'm');</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| cno   |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 6-295 |</span><br><span class="line">| 3-105 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="39查询最高分同学的sno-cno和degree"><a class="markdownIt-Anchor" href="#39查询最高分同学的sno-cno和degree"></a> 39.查询最高分同学的sno, cno和degree</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查出最高分的同学</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(degree) <span class="keyword">from</span> score;</span><br><span class="line"><span class="comment">-- 查询最高分同学的sno, cno和degree</span></span><br><span class="line">mysql&gt; select sno, cno , degree from score where degree in (select max(degree) from score);</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| sno | cno   | degree |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| 101 | 3-105 |     98 |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="40-查询和c同性别的所有同学的sname"><a class="markdownIt-Anchor" href="#40-查询和c同性别的所有同学的sname"></a> 40. 查询和&quot;C&quot;同性别的所有同学的sname</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询出“C”的性别</span></span><br><span class="line">mysql&gt; select ssex from student where sname  = 'C';</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| ssex |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| m    |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查询和"C"同性别的所有同学的sname</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sname, ssex <span class="keyword">from</span> student <span class="keyword">where</span> ssex = (<span class="keyword">select</span> ssex <span class="keyword">from</span> student <span class="keyword">where</span> sname  = <span class="string">'C'</span>);</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">| sname | ssex |</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">| A     | m    |</span><br><span class="line">| K     | m    |</span><br><span class="line">| B     | m    |</span><br><span class="line">| C     | m    |</span><br><span class="line">| X     | m    |</span><br><span class="line">| Z     | m    |</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="41查询和c同性别并且同班的所有同学的sname"><a class="markdownIt-Anchor" href="#41查询和c同性别并且同班的所有同学的sname"></a> 41.查询和&quot;C&quot;同性别并且同班的所有同学的sname</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询出“C”的性别</span></span><br><span class="line">mysql&gt; select ssex from student where sname  = 'C';</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| ssex |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| m    |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查询和"C"同班的所有同学的sname</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sname, ssex, <span class="keyword">class</span> <span class="keyword">from</span> student <span class="keyword">where</span> </span><br><span class="line">    -&gt; ssex = (<span class="keyword">select</span> ssex <span class="keyword">from</span> student <span class="keyword">where</span> sname  = <span class="string">'C'</span>)</span><br><span class="line">    -&gt; <span class="keyword">and</span></span><br><span class="line">    -&gt; <span class="keyword">class</span> = (<span class="keyword">select</span> <span class="keyword">class</span> <span class="keyword">from</span> student <span class="keyword">where</span> sname  = <span class="string">'C'</span>);</span><br><span class="line">+<span class="comment">-------+------+-------+</span></span><br><span class="line">| sname | ssex | class |</span><br><span class="line">+<span class="comment">-------+------+-------+</span></span><br><span class="line">| A     | m    | 96033 |</span><br><span class="line">| B     | m    | 96033 |</span><br><span class="line">| C     | m    | 96033 |</span><br><span class="line">| Z     | m    | 96033 |</span><br><span class="line">+<span class="comment">-------+------+-------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="42-查询所有选修datastructure课程的男同学的成绩表"><a class="markdownIt-Anchor" href="#42-查询所有选修datastructure课程的男同学的成绩表"></a> 42. 查询所有选修’DataStructure’课程的’男’同学的成绩表</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选出'DataStructure'课程的课程号</span></span><br><span class="line">mysql&gt; select cno from course where cname = 'DataStructure';</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| cno   |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| 3-105 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 选出男同学的学号</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> ssex = <span class="string">'m'</span>;</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| sno |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">| 101 |</span><br><span class="line">| 102 |</span><br><span class="line">| 103 |</span><br><span class="line">| 104 |</span><br><span class="line">| 106 |</span><br><span class="line">| 107 |</span><br><span class="line">+<span class="comment">-----+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查询所有选修'DataStructure'课程的'男'同学的成绩表</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> score <span class="keyword">where</span></span><br><span class="line">    -&gt; cno <span class="keyword">in</span> (<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> cname = <span class="string">'DataStructure'</span>)</span><br><span class="line">    -&gt; <span class="keyword">and</span> </span><br><span class="line">    -&gt; sno <span class="keyword">in</span> (<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> ssex = <span class="string">'m'</span>);</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| sno | cno   | degree |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">| 101 | 3-105 |     98 |</span><br><span class="line">| 103 | 3-105 |     76 |</span><br><span class="line">| 107 | 3-105 |     76 |</span><br><span class="line">+<span class="comment">-----+-------+--------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="43-假设使用了以下命令建立了一个grade表查询所有同学的sno-cno和grade列"><a class="markdownIt-Anchor" href="#43-假设使用了以下命令建立了一个grade表查询所有同学的sno-cno和grade列"></a> 43. 假设使用了以下命令建立了一个grade表，查询所有同学的sno , cno和grade列</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> grade(</span><br><span class="line">    <span class="keyword">low</span> <span class="built_in">INT</span>(<span class="number">3</span>),</span><br><span class="line">    upp <span class="built_in">INT</span>(<span class="number">3</span>),</span><br><span class="line">    grade <span class="built_in">CHAR</span>(<span class="number">1</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade <span class="keyword">VALUES</span>(<span class="number">90</span>,<span class="number">100</span>,<span class="string">'A'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade <span class="keyword">VALUES</span>(<span class="number">80</span>,<span class="number">89</span>,<span class="string">'B'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade <span class="keyword">VALUES</span>(<span class="number">70</span>,<span class="number">79</span>,<span class="string">'c'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade <span class="keyword">VALUES</span>(<span class="number">60</span>,<span class="number">69</span>,<span class="string">'D'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade <span class="keyword">VALUES</span>(<span class="number">0</span>,<span class="number">59</span>,<span class="string">'E'</span>);</span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有同学的sno , cno和grade列</span></span><br><span class="line">mysql&gt; select sno, cno, grade from score, grade where degree between low and upp;</span><br><span class="line">+<span class="comment">-----+--------+-------+</span></span><br><span class="line">| sno | cno    | grade |</span><br><span class="line">+<span class="comment">-----+--------+-------+</span></span><br><span class="line">| 101 | 3-105  | A     |</span><br><span class="line">| 102 | 3-245  | E     |</span><br><span class="line">| 103 | 3-105  | c     |</span><br><span class="line">| 104 | 6-295  | c     |</span><br><span class="line">| 105 | 3-105  | B     |</span><br><span class="line">| 105 | 6-295  | E     |</span><br><span class="line">| 106 | 10-232 | c     |</span><br><span class="line">| 107 | 10-232 | c     |</span><br><span class="line">| 107 | 3-105  | c     |</span><br><span class="line">| 108 | 10-232 | E     |</span><br><span class="line">| 108 | 6-295  | c     |</span><br><span class="line">| 109 | 6-295  | D     |</span><br><span class="line">+<span class="comment">-----+--------+-------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h3 id="5-sql的四种查询方式"><a class="markdownIt-Anchor" href="#5-sql的四种查询方式"></a> 5. SQL的四种查询方式</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 例：创建两个表</span></span><br><span class="line">mysql&gt; create database JoinTest;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; use JoinTest;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; use JoinTest;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; create table person(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; cardId int</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table card(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.11 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; delete from card where id in (3, 4, 5, 1);</span><br><span class="line">Query OK, 4 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from card;</span><br><span class="line">Empty <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> card <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'Food Card'</span>);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into card values(2, 'ICBC Card');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into card values(3, 'POST Card');</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into card values(4, 'CCB Card');</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into card values(5, 'CMB Card');</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from card;</span><br><span class="line">+<span class="comment">------+-----------+</span></span><br><span class="line">| id   | name      |</span><br><span class="line">+<span class="comment">------+-----------+</span></span><br><span class="line">|    1 | Food Card |</span><br><span class="line">|    2 | ICBC Card |</span><br><span class="line">|    3 | POST Card |</span><br><span class="line">|    4 | CCB Card  |</span><br><span class="line">|    5 | CMB Card  |</span><br><span class="line">+<span class="comment">------+-----------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> person <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'zhangsan'</span>, <span class="number">1</span>);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into person values(2, 'lisi', 4);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into person values(3, 'wangwu', 5);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from person;</span><br><span class="line">+<span class="comment">------+----------+--------+</span></span><br><span class="line">| id   | name     | cardId |</span><br><span class="line">+<span class="comment">------+----------+--------+</span></span><br><span class="line">|    1 | zhangsan |      1 |</span><br><span class="line">|    2 | lisi     |      4 |</span><br><span class="line">|    3 | wangwu   |      5 |</span><br><span class="line">+<span class="comment">------+----------+--------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 并没有创建外键</span></span><br></pre></td></tr></table></figure></div>
<h4 id="51-内连接inner-join-join"><a class="markdownIt-Anchor" href="#51-内连接inner-join-join"></a> 5.1 内连接：inner join / join</h4>
<p>在两张表中，通过某个相关联的字段，查询出相关记录数据</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> mysql&gt; select * from person (inner) join card on person.cardId = card.id;</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">| id   | name     | cardId | id   | name      |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">|    1 | zhangsan |      1 |    1 | Food Card |</span><br><span class="line">|    2 | lisi     |      4 |    4 | CCB Card  |</span><br><span class="line">|    3 | wangwu   |      5 |    5 | CMB Card  |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h4 id="52-外连接"><a class="markdownIt-Anchor" href="#52-外连接"></a> 5.2 外连接：</h4>
<h5 id="521-左连接left-join-left-outer-join"><a class="markdownIt-Anchor" href="#521-左连接left-join-left-outer-join"></a> 5.2.1 左连接：left join / left outer join</h5>
<p>左外连接，会把左表的所有数据取出，而右表中的数据，如果有与左表中的相等的，就取出，否则置空。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from person left (outer) join card on person.cardId = card.id;</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">| id   | name     | cardId | id   | name      |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">|    1 | zhangsan |      1 |    1 | Food Card |</span><br><span class="line">|    2 | lisi     |      4 |    4 | CCB Card  |</span><br><span class="line">|    3 | wangwu   |      5 |    5 | CMB Card  |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="522-右连接right-join-right-outer-join"><a class="markdownIt-Anchor" href="#522-右连接right-join-right-outer-join"></a> 5.2.2 右连接：right join / right outer join</h5>
<p>右外连接，会把右表的所有数据取出，而左表中的数据，如果有与右表中的相等的，就取出，否则置空。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from person right (outer) join card on person.cardId = card.id;</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">| id   | name     | cardId | id   | name      |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">|    1 | zhangsan |      1 |    1 | Food Card |</span><br><span class="line">| NULL | NULL     |   NULL |    2 | ICBC Card |</span><br><span class="line">| NULL | NULL     |   NULL |    3 | POST Card |</span><br><span class="line">|    2 | lisi     |      4 |    4 | CCB Card  |</span><br><span class="line">|    3 | wangwu   |      5 |    5 | CMB Card  |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="523-完全外连接full-join-full-outer-join"><a class="markdownIt-Anchor" href="#523-完全外连接full-join-full-outer-join"></a> 5.2.3 完全外连接：full join / full outer join</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from person left join card on person.cardId = card.id</span><br><span class="line">    -&gt; union</span><br><span class="line">    -&gt; select * from person right join card on person.cardId = card.id;</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">| id   | name     | cardId | id   | name      |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">|    1 | zhangsan |      1 |    1 | Food Card |</span><br><span class="line">|    2 | lisi     |      4 |    4 | CCB Card  |</span><br><span class="line">|    3 | wangwu   |      5 |    5 | CMB Card  |</span><br><span class="line">| NULL | NULL     |   NULL |    2 | ICBC Card |</span><br><span class="line">| NULL | NULL     |   NULL |    3 | POST Card |</span><br><span class="line">+<span class="comment">------+----------+--------+------+-----------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<h3 id="6-事务"><a class="markdownIt-Anchor" href="#6-事务"></a> 6. 事务</h3>
<h4 id="61-事务是mysql中最小的不可分割的工作单元-事务能保证一个业务的完整性"><a class="markdownIt-Anchor" href="#61-事务是mysql中最小的不可分割的工作单元-事务能保证一个业务的完整性"></a> 6.1 事务是MySQL中最小的不可分割的工作单元。事务能保证一个业务的完整性。</h4>
<p>例如：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- a --withdraw-&gt; 100</span></span><br><span class="line"><span class="keyword">update</span> bank <span class="keyword">set</span> money = money - <span class="number">100</span> <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'a'</span>;</span><br><span class="line"><span class="comment">-- b &lt;-sotre-- 100</span></span><br><span class="line"><span class="keyword">update</span> bank <span class="keyword">set</span> money = money + <span class="number">100</span> <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'b'</span>;</span><br></pre></td></tr></table></figure></div>
<p>在实际的程序中，如果只有一条语句执行成功，另一条语句没有执行成功，就会出现数据前后不一致。</p>
<p>多条sql语句，可能会有同时成功的要求，要么就同时失败。</p>
<h4 id="62-mysql中如何控制事务"><a class="markdownIt-Anchor" href="#62-mysql中如何控制事务"></a> 6.2 MySQL中如何控制事务？</h4>
<h5 id="621-mysql中默认开启事务自动提交"><a class="markdownIt-Anchor" href="#621-mysql中默认开启事务自动提交"></a> 6.2.1 MySQL中默认开启事务（自动提交）</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| @@autocommit |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">|            1 |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<p>默认开启自动提交的作用是什么？</p>
<p>当我们去执行一个sql语句时，效果就会立即体现出来，且不能回滚。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database bank;</span><br><span class="line">Query OK, 1 row affected (0.08 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table bank(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; money int</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.13 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into bank values(1, 'a', 1000);</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<p>设置默认提交为false：</p>
<h5 id="622-手动提交commit数据再撤销不可行数据持久性"><a class="markdownIt-Anchor" href="#622-手动提交commit数据再撤销不可行数据持久性"></a> 6.2.2 手动提交（commit）数据，再撤销，不可行（数据持久性）</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit = <span class="number">0</span>；</span><br><span class="line">mysql&gt; <span class="keyword">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| @@autocommit |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">|            0 |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> bank <span class="keyword">values</span>(<span class="number">2</span>, <span class="string">'b'</span>, <span class="number">1000</span>);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">insert</span> <span class="keyword">into</span> bank <span class="keyword">values</span>(<span class="number">2</span>, <span class="string">'b'</span>, <span class="number">1000</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">update</span> bank <span class="keyword">set</span> money = money - <span class="number">100</span> <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'a'</span>;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update bank set money = money + 100 where name = 'b';</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></div>
<p>事务给我们提供了一个返回的机会</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| @@autocommit |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">|            0 |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">set</span> autocommit = <span class="number">1</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| @@autocommit |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">|            1 |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="623-手动开启一个事务-beginstart-transaction"><a class="markdownIt-Anchor" href="#623-手动开启一个事务-beginstart-transaction"></a> 6.2.3 手动开启一个事务 begin/start transaction</h5>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update bank set money = money - 100 where name = 'a';</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update bank set money = money + 100 where name = 'b';</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 事务没有被撤销</span></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 手动开启事务</span></span><br><span class="line">mysql&gt; <span class="keyword">begin</span>;		<span class="comment">-- 或 start transaction</span></span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update bank set money = money - 100 where name = 'a';</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update bank set money = money + 100 where name = 'b';</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   800 |</span><br><span class="line">|  2 | b    |  1200 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">commit</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure></div>
<p>事务开启后，一旦提交，就不能回滚。</p>
<h4 id="63-事务的四大特征acid"><a class="markdownIt-Anchor" href="#63-事务的四大特征acid"></a> 6.3 事务的四大特征(ACID)</h4>
<h5 id="631-a原子性事务是最小单位不可再分割"><a class="markdownIt-Anchor" href="#631-a原子性事务是最小单位不可再分割"></a> 6.3.1 A：原子性——事务是最小单位，不可再分割；</h5>
<h5 id="632-c一致性事务要求在同一事务中的sql语句必须保证同时成功或同时失败"><a class="markdownIt-Anchor" href="#632-c一致性事务要求在同一事务中的sql语句必须保证同时成功或同时失败"></a> 6.3.2 C：一致性——事务要求，在同一事务中的sql语句，必须保证同时成功或同时失败；</h5>
<h5 id="633-i隔离性事务a和b之间具有隔离性"><a class="markdownIt-Anchor" href="#633-i隔离性事务a和b之间具有隔离性"></a> 6.3.3 I：隔离性——事务A和B之间具有隔离性；</h5>
<ol>
<li>
<p>read uncommitted; 读未提交的：</p>
</li>
<li>
<p>read committed;     读已提交的</p>
</li>
<li>
<p>repeatable read;     可重复读的（MySQL默认隔离级别）</p>
</li>
<li>
<p>serializable             串行化：事务操作串行。当一个表被一个事务操作时，另一个事务不能对其进行写操作，被阻塞，排队等待，直到前一个事务commit。等待超时也得重新执行。</p>
<blockquote>
<p>性能：read uncommitted &gt; read committed &gt; repeatable read &gt; serializable</p>
<p>隔离级别越高，性能越差。</p>
</blockquote>
</li>
</ol>
<p>如何查询数据库隔离级别：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- mysql 8.0+</span></span><br><span class="line"><span class="keyword">select</span> @@global.transaction_isolation;	<span class="comment">-- 系统级别</span></span><br><span class="line"><span class="keyword">select</span> @@transaction_isolation;					<span class="comment">-- 会话级别</span></span><br><span class="line"></span><br><span class="line">mysql&gt; select @@global.transaction_isolation;</span><br><span class="line">+<span class="comment">--------------------------------+</span></span><br><span class="line">| @@global.transaction_isolation |</span><br><span class="line">+<span class="comment">--------------------------------+</span></span><br><span class="line">| REPEATABLE-READ                |</span><br><span class="line">+<span class="comment">--------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- mysql 5.x</span></span><br><span class="line"><span class="keyword">select</span> @@global.tx_isolation;		<span class="comment">-- 系统级别</span></span><br><span class="line"><span class="keyword">select</span> @@tx_isolation;					<span class="comment">-- 会话级别</span></span><br></pre></td></tr></table></figure></div>
<p>如何修改数据库隔离级别:</p>
<p>例：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set session transaction isolation level read uncommitted;	-- 当前会话</span><br><span class="line">mysql&gt; set global transaction isolation level read uncommitted;	-- 当前系统</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| READ-UNCOMMITTED        |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"><span class="comment">-- a在b处买800块钱的鞋子</span></span><br><span class="line">mysql&gt; update bank set money = money - 800 where name = 'a';</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"><span class="comment">-- b收到800块钱</span></span><br><span class="line">mysql&gt; update bank set money = money + 800 where name = 'b';</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"><span class="comment">-- b去查帐</span></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   100 |</span><br><span class="line">|  2 | b    |  1900 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 发货</span></span><br><span class="line"><span class="comment">-- 晚上请女朋友吃好吃的</span></span><br><span class="line"><span class="comment">-- 1900</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a -&gt; rollback;</span></span><br><span class="line">mysql&gt; <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"><span class="comment">-- b吃完饭结账，发现钱不够</span></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 如果两个不同地方都在进行操作。如果事务a开启后，它的数据可以被别的事务读取到。</span></span><br><span class="line"><span class="comment">-- 这样就会出现“脏读”：一个事务读取到另一个事务没有提交的数据。</span></span><br><span class="line"><span class="comment">-- 实际开发中不允许脏读的出现。</span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改隔离级别</span></span><br><span class="line">mysql&gt; set session transaction isolation level read committed;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| READ-COMMITTED          |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 小张：银行会计</span></span><br><span class="line">mysql&gt; <span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank;</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">| id | name | money |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+<span class="comment">----+------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 小张上厕所</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 小明</span></span><br><span class="line">mysql&gt; <span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into bank values(3, 'c', 100);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 小张回来</span></span><br><span class="line">mysql&gt; select avg(money) from bank;</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| avg(money) |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">|   700.0000 |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- money平均值改变了</span></span><br><span class="line"><span class="comment">-- 虽然我能读到另一个事务提交的数据，但还是会出现问题：读取同一个表的数据出现前后不一致。</span></span><br><span class="line"><span class="comment">-- 不可重复读现象：read committed</span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改隔离级别</span></span><br><span class="line">mysql&gt; set session transaction isolation level repeatable read;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 幻读：事务a和b同时操作一张表，事务a提交的数据，不能被事务b读到</span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改隔离级别</span></span><br><span class="line">mysql&gt; set session transaction isolation level serializable;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| SERIALIZABLE            |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></div>
<h5 id="634-d持久性事务一旦结束就不可以回滚"><a class="markdownIt-Anchor" href="#634-d持久性事务一旦结束就不可以回滚"></a> 6.3.4 D：持久性——事务一旦结束，就不可以回滚。</h5>
<h2 id="二-如何使用可视化工具操作数据库"><a class="markdownIt-Anchor" href="#二-如何使用可视化工具操作数据库"></a> 二、如何使用可视化工具操作数据库？</h2>
<h2 id="三-如何在编程语言中操作数据库"><a class="markdownIt-Anchor" href="#三-如何在编程语言中操作数据库"></a> 三、如何在编程语言中操作数据库？</h2>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:huangblcs@outlook.com">Polin Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://www.poro.cool/2020/05/18/SkillRepos/Note4MySQL/">http://www.poro.cool/2020/05/18/SkillRepos/Note4MySQL/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/知识仓库/">知识仓库    </a></div><div class="post_share"><div class="social-share" data-image="https://www.percona.com/blog/wp-content/uploads/2018/04/Mysql-dolphin-square.svg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/05/23/SkillRepos/Configuration4CentOS8(Docker)/"><img class="prev_cover lazyload" data-src="https://blog.rimuhosting.com/wp-content/uploads/2014/07/centos_logo.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Configuration4CentOS8(Docker)</span></div></a></div><div class="next-post pull_right"><a href="/2020/05/08/Algorithm/LeetCode/"><img class="next_cover lazyload" data-src="http://uicdesign.com/des150-f13b/wp-content/uploads/printable-letter-greatvibes-l.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>LeetCode</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/05/23/SkillRepos/Configuration4CentOS8(Docker)/" title="Configuration4CentOS8(Docker)"><img class="relatedPosts_cover lazyload" data-src="https://blog.rimuhosting.com/wp-content/uploads/2014/07/centos_logo.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-23</div><div class="relatedPosts_title">Configuration4CentOS8(Docker)</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/21/SkillRepos/Latex数学符号/" title="LaTex数学符号"><img class="relatedPosts_cover lazyload" data-src="https://news.schoolsdo.org/wp-content/uploads/2016/02/algebra_geometry_chalk.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-21</div><div class="relatedPosts_title">LaTex数学符号</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/05/SkillRepos/C++STL/" title="C++STL"><img class="relatedPosts_cover lazyload" data-src="https://cdn.dribbble.com/users/269297/screenshots/2512084/cdribbble.gif"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-05</div><div class="relatedPosts_title">C++STL</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/05/SkillRepos/C语言程序设计/" title="C语言程序设计"><img class="relatedPosts_cover lazyload" data-src="https://cdn.dribbble.com/users/269297/screenshots/2512084/cdribbble.gif"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-05</div><div class="relatedPosts_title">C语言程序设计</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/21/SkillRepos/HTML特殊字符编码对照表/" title="HTML特殊字符编码对照表"><img class="relatedPosts_cover lazyload" data-src="https://itsourcecode.com/wp-content/uploads/2015/10/html.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-21</div><div class="relatedPosts_title">HTML特殊字符编码对照表</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Polin Huang</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script></body></html>